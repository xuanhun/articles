<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>7.1 PivotTable æ¦‚å¿µå’Œèƒ½åŠ›å®šä¹‰</title>
    <meta name="keywords" content="VisActor,VChart,VTable,VStrory,VMind,VGrammar,VRender,Visualization,Chart,Data,Table,Graph,Gis,LLM">
    <style>
        body {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
            line-height: 1.6;
            color: #24292e;
            background-color: #fff;
        }
        h1, h2, h3, h4, h5, h6 {
            margin-top: 24px;
            margin-bottom: 16px;
            font-weight: 600;
            line-height: 1.25;
        }
        h1 { font-size: 2em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
        h2 { font-size: 1.5em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
        h3 { font-size: 1.25em; }
        code {
            padding: 0.2em 0.4em;
            margin: 0;
            font-size: 85%;
            background-color: rgba(27,31,35,0.05);
            border-radius: 3px;
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
        }
        pre {
            padding: 16px;
            overflow: auto;
            font-size: 85%;
            line-height: 1.45;
            background-color: #f6f8fa;
            border-radius: 6px;
        }
        pre code {
            background-color: transparent;
            padding: 0;
            font-size: 100%;
        }
        img {
            max-width: 100%;
            height: auto;
            box-sizing: content-box;
            background-color: #fff;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 16px 0;
            display: block;
            overflow: auto;
        }
        table th, table td {
            padding: 6px 13px;
            border: 1px solid #d0d7de;
        }
        table th {
            font-weight: 600;
            background-color: #f6f8fa;
        }
        table tr {
            background-color: #fff;
            border-top: 1px solid #d0d7de;
        }
        table tr:nth-child(2n) {
            background-color: #f6f8fa;
        }
        a {
            color: #0969da;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        blockquote {
            padding: 0 1em;
            color: #656d76;
            border-left: 0.25em solid #d0d7de;
            margin: 0 0 16px 0;
        }
        hr {
            height: 0.25em;
            padding: 0;
            margin: 24px 0;
            background-color: #d0d7de;
            border: 0;
        }
        ul, ol {
            padding-left: 2em;
        }
        li + li {
            margin-top: 0.25em;
        }
    </style>
</head>
<body>
    <p>é‰´äºæœ¬èŠ‚å…¶å®è·Ÿä»£ç æ²¡ä»€ä¹ˆå…³ç³»ï¼Œå¹¶ä¸” å’Œ <a href="https://www.visactor.io/vtable/guide/table_type/Pivot_table/pivot_table_overview">å®˜æ–¹æ–‡æ¡£</a> å·²ç»å†™çš„å¾ˆæ¸…æ¥šäº†ï¼Œè¿™é‡Œå†™ä¸€äº›è‡ªå·±çš„ç†è§£    </p>
<h2 id="pivottable">PivotTable åŸºç¡€æ¦‚å¿µ</h2>
<div style="padding:5px;background-color: rgb(255, 245, 235);border-color: rgb(255, 245, 235);">å¤šç»´åˆ†æè¡¨åˆåæ•°æ®é€è§†è¡¨ã€äº¤å‰è¡¨ã€Pivot Tableï¼ŒæŒ‡çš„æ˜¯å¯ä»¥åœ¨**è¡Œç»´åº¦**å’Œ**åˆ—ç»´åº¦**æ”¾å…¥ä¸€ä¸ªæˆ–**å¤šä¸ªç»´åº¦**ï¼Œæ˜¾ç¤º**ç»´åº¦ä¹‹é—´ç›¸äº’å…³ç³»**çš„ä¸€ç§è¡¨æ ¼ã€‚ç”¨æˆ·å¯ä»¥ä¸€ç›®äº†ç„¶åœ°åˆ†æå‡ºå„ç§åœºæ™¯æŒ‡æ ‡ä»¥åŠå¯¹æ¯”ï¼Œæ—¨åœ¨å¸®åŠ©ä¸šåŠ¡åˆ†ææ¨åŠ¨å†³ç­–    
</div>

<p>è¿™ä¹ˆè¯´æœ‰ç‚¹æŠ½è±¡ï¼Œæœ‰äº›è¯»è€…å¯èƒ½ä¼šç–‘æƒ‘ï¼šæœ‰å¤šä¸ªè¡Œç»´åº¦ + å¤šä¸ªåˆ—ç»´åº¦çš„è¡¨æ ¼ï¼Œé•¿ä»€ä¹ˆæ ·å­ï¼Ÿä¸¾ä¸ªğŸŒ°ï¼š    </p>
<p>ä¸€ä¸ªè¥é”€åŒå­¦<strong>æ¯å¤©</strong>è¦ç»Ÿè®¡æŸæ¬¾æ‰«åœ°æœºå™¨äººåœ¨<strong>å„ä¸ªçº¿ä¸Šåº—é“º</strong>çš„<strong>ä»·æ ¼</strong>ã€‚æˆ‘ä»¬åˆ†æä¸‹ä»–é¢ä¸´çš„åœºæ™¯ï¼š    </p>
<ol>
<li>â€œå„ä¸ªçº¿ä¸Šåº—é“ºâ€ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“ä¸º<code>æ¸ é“</code>è¿™ä¸ª<strong>ç»´åº¦ï¼ˆDimensionï¼‰</strong>ã€‚æ ¹æ®ä»–çš„æ—¥å¸¸å·¥ä½œï¼Œæœ‰ä»¥ä¸‹è¿™æ£µ<code>æ¸ é“æ ‘</code>ï¼š    </li>
</ol>
<p><img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/OfNfbYOVbotVR7xn5hgcpBGunof.gif' alt='' width='1000' height='auto'></p>
<ol>
<li>æ ¹æ®<code>æ¸ é“</code>è¿™ä¸ªç»´åº¦çš„ä¸åŒå±‚çº§ï¼Œåˆ’åˆ†ä¸ºï¼š<code>æ¸ é“ | å¹³å° | åº—é“º</code> ä¸‰ä¸ª<strong>ç»´åº¦å±‚çº§ (Dimension Level)</strong>ã€‚ä»¥â€œå¹³å°â€è¿™ä¸ªç»´åº¦å±‚çº§ä¸ºä¾‹ï¼Œæœ‰ä¸‰ä¸ªå€¼ï¼šæ·˜å®ã€äº¬ä¸œã€æŠ–éŸ³ï¼Œæˆ‘ä»¬ç§°å…¶ä¸º<strong>ç»´åº¦æˆå‘˜ï¼ˆDimension Valueï¼‰</strong>    </li>
</ol>
<p><img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/TbISbGYb1oA9Qvx4HiZcXzPcnhc.gif' alt='' width='1000' height='auto'></p>
<p>ç”¨ <code>TypeScript</code> æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°å†™å‡º<code>æ¸ é“</code>çš„ç±»å‹å®šä¹‰ï¼Œä»¥åŠ<code>æ¸ é“æ ‘</code>ï¼š    </p>
<pre class="codehilite"><code class="language-xml">enum IChannel {
  Channel = 'channel',     // æ¸ é“
  Platform = 'platfrom',   // å¹³å°
  Shop = 'shop'            // åº—é“º
}

const channelTree = [
  {
    nodeType: IChannel.Channel,
    value: 'çº¿ä¸Š',
    children: [
      {
        nodeType: IChannel.Platform,
        value: 'æ·˜å®',
        children: [
          {
            nodeType: IChannel.Shop,
            value: 'æ·˜å®æ——èˆ°åº—'
          },
          {
            nodeType: IChannel.Shop,
            value: 'æ·˜å®ä¸‰æ–¹åº—'
          }
        ]
      },
      {
        nodeType: IChannel.Platform,
        value: 'äº¬ä¸œ',
        children: [
          {
            nodeType: IChannel.Shop,
            value: 'äº¬ä¸œæ——èˆ°åº—'
          },
          {
            nodeType: IChannel.Shop,
            value: 'äº¬ä¸œä¸‰æ–¹åº—'
          }
        ]
      },
      {
        nodeType: IChannel.Platform,
        value: 'æŠ–éŸ³',
        children: [
          {
            nodeType: IChannel.Shop,
            value: 'æŠ–éŸ³æ——èˆ°åº—'
          },
          {
            nodeType: IChannel.Shop,
            value: 'æŠ–éŸ³ä¸‰æ–¹åº—'
          }
        ]
      }
    ]
  }
];    
</code></pre>

<ol>
<li>ç”±äºâ€œæ¯å¤©â€éƒ½ç»Ÿè®¡è¿™äº›æ•°æ®ï¼Œä¹…è€Œä¹…ä¹‹ï¼Œä¹Ÿæœ‰<code>æ—¶é—´</code>è¿™ä¸ª<strong>ç»´åº¦</strong>å’Œ<code>æ—¶é—´æ ‘</code>ï¼š    </li>
</ol>
<p><img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/CWtObUweho18DfxgrHBci8SpnNc.gif' alt='' width='656' height='auto'></p>
<pre class="codehilite"><code class="language-xml">enum ITime {
    Month = 'month',
    Week = 'week',
    Day = 'day'
}

const timeTree = [
  {
    nodeType: ITime.Month,
    value: '3',
    children: [
      {
        nodeType: ITime.Week,
        value: '1',
        children: [
          {
            nodeType: ITime.Day,
            value: '2025-03-03'
          },
          {
            nodeType: ITime.Day,
            value: '2025-03-04'
          },
          {
            nodeType: ITime.Day,
            value: '2025-03-05'
          },
          ...
        ]
      },
      {
        nodeType: ITime.Week,
        value: '2',
        children: [
          {
            nodeType: ITime.Day,
            value: '2025-03-10'
          },
          {
            nodeType: ITime.Day,
            value: '2025-03-11'
          },
          {
            nodeType: ITime.Day,
            value: '2025-03-12'
          },
          ...
        ]
      },
      {
        nodeType: ITime.Week,
        value: '3',
        children: [
          {
            nodeType: ITime.Day,
            value: '2025-03-17'
          },
          {
            nodeType: ITime.Day,
            value: '2025-03-18'
          },
          {
            nodeType: ITime.Day,
            value: '2025-03-19'
          },
          ...
        ]
      }
    ]
  }
];    
</code></pre>

<ol>
<li>è¿™ä¸ªè¥é”€åŒå­¦å…·ä½“åœ¨ç»Ÿè®¡ä»€ä¹ˆæ•°æ® â€”â€” ä»·æ ¼ã€‚å¯èƒ½åˆ†ä¸ºåŸä»·ã€åˆ¸åä»· ç­‰ï¼Œè¿™äº›å…·ä½“çš„æ•°æ®æˆ‘ä»¬ç§°ä¸º <strong>æŒ‡æ ‡</strong>ï¼ˆIndicatorï¼‰ã€‚ç»“åˆä¸Šè¿°çš„æ¸ é“æ ‘å’Œä»·æ ¼æ ‘ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°è¿™æ ·ä¸€ä¸ªå¤šç»´è¡¨æ ¼    </li>
</ol>
<p><img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/Ucehb8ZHtoSpLXxTCFUcDjf7nsc.gif' alt='' width='1000' height='auto'></p>
<h2 id="_1">æ•°æ®æ¦‚å¿µ</h2>
<p>çœ‹åˆ°è¿™é‡Œï¼Œæ­å–œä½ å·²ç»æŒæ¡å¤šç»´è¡¨æ ¼çš„æ¦‚å¿µäº†ï¼    </p>
<p>æˆ‘ä»¬æŠŠä¸Šé¢çš„å¤šç»´è¡¨æ ¼è¿›ä¸€æ­¥æŠ½è±¡ï¼Œå¯ä»¥å¾—çŸ¥ï¼Œå±•ç¤ºä¸€ä¸ªå¤šç»´è¡¨æ ¼ï¼Œéœ€è¦ä»¥ä¸‹æ•°æ®ï¼š    </p>
<ol>
<li>
<p>è¡Œè¡¨å¤´æ ‘ (rowTree)ï¼šä»¥æ ‘çŠ¶ç»“æ„è¡¨ç¤ºè¡Œç»´åº¦å±‚çº§å…³ç³»çš„è¡¨å¤´ã€‚å³ä¸Šè¿°ä¾‹å­çš„ <code>timeTree</code>    </p>
</li>
<li>
<p>åˆ—è¡¨å¤´æ ‘ (columnTree)ï¼šä»¥æ ‘çŠ¶ç»“æ„è¡¨ç¤ºåˆ—ç»´åº¦å±‚çº§å…³ç³»çš„è¡¨å¤´ã€‚å³ä¸Šè¿°ä¾‹å­çš„ <code>channelTree</code>    </p>
</li>
<li>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œä¸ºäº†æ–¹ä¾¿å±•ç¤ºï¼ŒæŒ‡æ ‡ (indicator) ä¼šæ˜¯ columnTree çš„å¶å­èŠ‚ç‚¹    </p>
</li>
<li>
<p>è§’å¤´ (cornHeader)ï¼šä½äºè¡Œè¡¨å¤´å’Œåˆ—è¡¨å¤´äº¤å‰åŒºåŸŸçš„å•å…ƒæ ¼ï¼Œç”¨äºæ˜¾ç¤ºæŒ‡æ ‡æ ‡é¢˜å’Œå…¶ä»–è¾…åŠ©ä¿¡æ¯    </p>
</li>
<li>
<p>å…·ä½“çš„æ•°æ® (records): å³åœ¨ <strong>å„ä¸ªç»´åº¦ä¸‹</strong>ã€<strong>å„ä¸ªæŒ‡æ ‡</strong> çš„å…·ä½“æ•°æ®ï¼Œä¼šå±•ç¤ºåœ¨æ•°æ®å•å…ƒæ ¼ä¸­ï¼ˆæˆ‘ä»¬ç§°è¿™ä¸ªåŒºåŸŸä¸ºbodyï¼‰    </p>
</li>
</ol>
<p><img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/W3lVbn6VyoRBH7xT7yyc2Ov9nmC.gif' alt='' width='1000' height='auto'></p>
<h2 id="_2">ç›®æ ‡</h2>
<div style="padding:5px;background-color: rgb(255, 245, 235);border-color: rgb(255, 245, 235);">å®ç°ä¸€ä¸ªé«˜æ€§èƒ½ï¼Œå…·å¤‡æ•°æ®è½¬æ¢ã€ç»Ÿè®¡ã€æ’åºã€é’»å–ã€å¯è§†åŒ–ç­‰èƒ½åŠ›çš„å¤šç»´åˆ†æè¡¨æ ¼    
</div>

<h2 id="_3">èƒ½åŠ›</h2>
<p>å…·ä½“èƒ½åŠ›æ¢³ç†å¦‚ä¸‹ï¼šåŸºç¡€èƒ½åŠ›ï¼ˆå¯¹é½ ListTable çš„åŠŸèƒ½ï¼‰ï¼Œä»¥åŠ PivotTable ç‰¹æœ‰çš„åŠŸèƒ½ç‚¹    </p>
<p><img alt="" src="https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/H7phwoISahq5TWbzVswchvrVnbG.gif" /></p>
<h2 id="_4">ç›¸å…³èµ„æ–™</h2>
<ul>
<li></li>
<li>
<p><a href="https://visactor.io/vtable/guide/table_type/Pivot_table/pivot_table_overview">å®˜æ–¹æ–‡æ¡£</a>    </p>
</li>
</ul>
<p># æœ¬æ–‡æ¡£ç”±ä»¥ä¸‹äººå‘˜ä¿®æ­£æ•´ç† 
 <a href="https://github.com/xuanhun">ç„é­‚</a></p>
</body>
</html>