<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>14.1.1 Introduction to React-VChart</title>
    <meta name="keywords" content="VisActor,VChart,VTable,VStrory,VMind,VGrammar,VRender,Visualization,Chart,Data,Table,Graph,Gis,LLM">
    <style>
        body {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
            line-height: 1.6;
            color: #24292e;
            background-color: #fff;
        }
        h1, h2, h3, h4, h5, h6 {
            margin-top: 24px;
            margin-bottom: 16px;
            font-weight: 600;
            line-height: 1.25;
        }
        h1 { font-size: 2em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
        h2 { font-size: 1.5em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
        h3 { font-size: 1.25em; }
        code {
            padding: 0.2em 0.4em;
            margin: 0;
            font-size: 85%;
            background-color: rgba(27,31,35,0.05);
            border-radius: 3px;
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
        }
        pre {
            padding: 16px;
            overflow: auto;
            font-size: 85%;
            line-height: 1.45;
            background-color: #f6f8fa;
            border-radius: 6px;
        }
        pre code {
            background-color: transparent;
            padding: 0;
            font-size: 100%;
        }
        img {
            max-width: 100%;
            height: auto;
            box-sizing: content-box;
            background-color: #fff;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 16px 0;
            display: block;
            overflow: auto;
        }
        table th, table td {
            padding: 6px 13px;
            border: 1px solid #d0d7de;
        }
        table th {
            font-weight: 600;
            background-color: #f6f8fa;
        }
        table tr {
            background-color: #fff;
            border-top: 1px solid #d0d7de;
        }
        table tr:nth-child(2n) {
            background-color: #f6f8fa;
        }
        a {
            color: #0969da;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        blockquote {
            padding: 0 1em;
            color: #656d76;
            border-left: 0.25em solid #d0d7de;
            margin: 0 0 16px 0;
        }
        hr {
            height: 0.25em;
            padding: 0;
            margin: 24px 0;
            background-color: #d0d7de;
            border: 0;
        }
        ul, ol {
            padding-left: 2em;
        }
        li + li {
            margin-top: 0.25em;
        }
    </style>
</head>
<body>
    <h2 id="overview">Overview</h2>
<p>react-vchart is the React wrapper version of VChart, mainly providing two styles of components externally:    </p>
<ul>
<li>
<p><code>&lt;VChart /&gt;</code> and <code>&lt;VChartSimple /&gt;</code>    </p>
</li>
<li>
<p><code>&lt;LineChart /&gt;</code> and other semantic tags    </p>
</li>
</ul>
<p>Their differences are as follows:    </p>
<ul>
<li>
<p><strong>Applicable Scenarios</strong>:    </p>
</li>
<li>
<p><code>&lt;VChart /&gt;</code>: A large and comprehensive unified entry tag that encapsulates chart specifications, providing standardized update and unload logic. Suitable for toB pages, product pages with page building, and business parties migrating with self-encapsulated VChart.    </p>
</li>
<li>
<p>Semantic tags: Suitable for simple pages, where developers write code manually, making it easy to implement unpacking and on-demand loading.    </p>
</li>
<li>
<p><strong>Usage</strong>:    </p>
</li>
<li>
<p><code>&lt;VChart /&gt;</code>: Receives a complete spec as the chart definition. When using, introduce the <code>VChart</code> component and pass in spec and other related attributes. For example:    </p>
</li>
</ul>
<pre class="codehilite"><code class="language-xml">import { VChart } from '@visactor/react-vchart';
// 假设已经有了 spec 图表描述信息
const spec = {
    // 图表定义相关内容
};
const App = () =&gt; {
    return (
        &lt;VChart
            spec={spec}
            // 其他属性如 options、onReady 等
        /&gt;
    );
};
export default App;    
</code></pre>

<ul>
<li>Syntax tags: Encapsulate the chart container and each component as React components for export. Choose the corresponding chart tag according to the chart type when using, and then match it with the appropriate component tags and series tags. For example, to create a bar chart:    \r\n\r</li>
</ul>
<pre class="codehilite"><code class="language-javascript">import React, { useRef } from'react';
import { BarChart, Bar, Legend, Axis } from '@visactor/react-vchart';
const App = () =&gt; {
    const chartRef = useRef(null);
    const handleChartClick = () =&gt; {
        console.log('图表被点击了');
    };
    const barData = [
        { type: 'Autocracies', year: '1930', value: 129 },
        // 其他数据项
    ];
    return (
        &lt;div&gt;
            &lt;BarChart
                ref={chartRef}
                data={[{ id: 'id0', values: barData }]}
                onClick={handleChartClick}
            &gt;
                &lt;Bar
                    seriesField=&quot;type&quot;
                    xField={['year', 'type']}
                    yField=&quot;value&quot;
                    bar={{
                        style: {
                            stroke: '#000',
                            strokeWidth: 1
                        },
                        state: {
                            hover: {
                                stroke: 'black'
                            }
                        }
                    }}
                /&gt;
                &lt;Axis orient=&quot;bottom&quot; type=&quot;band&quot; /&gt;
                &lt;Axis orient=&quot;left&quot; max={200} type=&quot;linear&quot; /&gt;
                &lt;Legend visible={true} position=&quot;start&quot; orient=&quot;top&quot; padding={{ bottom: 12 }} /&gt;
            &lt;/BarChart&gt;
        &lt;/div&gt;
    );
};
export default App;    
</code></pre>

<p>Through the above code examples, the differences in usage between the two components can be understood more intuitively.    </p>
<h2 id="core-code-implementation">Core Code Implementation</h2>
<p>From the implementation perspective, the encapsulation principles of <code>&lt;VChart /&gt;</code> and <code>&lt;LineChart /&gt;</code> do not differ much. Firstly, all Chart components are encapsulated based on <code>BaseChart</code>, with the core code in the following files:    </p>
<ul>
<li>
<p><a href="https://github.com/VisActor/VChart/blob/develop/packages/react-vchart/src/containers/withContainer.tsx"><code>packages/react-vchart/src/containers/withContainer.tsx</code></a>    </p>
</li>
<li>
<p><a href="https://github.com/VisActor/VChart/blob/develop/packages/react-vchart/src/charts/BaseChart.tsx"><code>packages/react-vchart/src/charts/BaseChart.tsx</code></a>    </p>
</li>
</ul>
<p>For semantic tags, apart from the above modules, the main focus is on the encapsulation of components and series, with the core code as follows:    </p>
<ul>
<li>
<p><a href="https://github.com/VisActor/VChart/blob/develop/packages/react-vchart/src/components/BaseComponent.tsx"><code>packages/react-vchart/src/components/BaseComponent.tsx</code></a>    </p>
</li>
<li>
<p><a href="https://github.com/VisActor/VChart/blob/develop/packages/react-vchart/src/series/BaseSeries.tsx"><code>packages/react-vchart/src/series/BaseSeries.tsx</code></a>    </p>
</li>
</ul>
<p>Taking AreaChart as an example, the main class relationship diagram is as follows    </p>
<p><img alt="" src="https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/sourcecode/img/U17mw4odYheCoiblgyjcfTYVnrh.gif" /></p>
<p>在接下来的章节，我们将详细的分析Chart组件、系列组件、VChart组件的封装    </p>
<p># 本文档由以下人员修正整理 
 <a href="https://github.com/xuanhun">玄魂</a></p>
</body>
</html>