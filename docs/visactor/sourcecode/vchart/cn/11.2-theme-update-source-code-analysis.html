<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>11.2 ä¸»é¢˜çš„æ›´æ–°æºç è§£è¯»</title>
    <meta name="keywords" content="VisActor,VChart,VTable,VStrory,VMind,VGrammar,VRender,Visualization,Chart,Data,Table,Graph,Gis,LLM">
    <style>
        body {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
            line-height: 1.6;
            color: #24292e;
            background-color: #fff;
        }
        h1, h2, h3, h4, h5, h6 {
            margin-top: 24px;
            margin-bottom: 16px;
            font-weight: 600;
            line-height: 1.25;
        }
        h1 { font-size: 2em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
        h2 { font-size: 1.5em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
        h3 { font-size: 1.25em; }
        code {
            padding: 0.2em 0.4em;
            margin: 0;
            font-size: 85%;
            background-color: rgba(27,31,35,0.05);
            border-radius: 3px;
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
        }
        pre {
            padding: 16px;
            overflow: auto;
            font-size: 85%;
            line-height: 1.45;
            background-color: #f6f8fa;
            border-radius: 6px;
        }
        pre code {
            background-color: transparent;
            padding: 0;
            font-size: 100%;
        }
        img {
            max-width: 100%;
            height: auto;
            box-sizing: content-box;
            background-color: #fff;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 16px 0;
            display: block;
            overflow: auto;
        }
        table th, table td {
            padding: 6px 13px;
            border: 1px solid #d0d7de;
        }
        table th {
            font-weight: 600;
            background-color: #f6f8fa;
        }
        table tr {
            background-color: #fff;
            border-top: 1px solid #d0d7de;
        }
        table tr:nth-child(2n) {
            background-color: #f6f8fa;
        }
        a {
            color: #0969da;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        blockquote {
            padding: 0 1em;
            color: #656d76;
            border-left: 0.25em solid #d0d7de;
            margin: 0 0 16px 0;
        }
        hr {
            height: 0.25em;
            padding: 0;
            margin: 24px 0;
            background-color: #d0d7de;
            border: 0;
        }
        ul, ol {
            padding-left: 2em;
        }
        li + li {
            margin-top: 0.25em;
        }
    </style>
</head>
<body>
    <h1 id="_1">ä¸»é¢˜æ›´æ–°åŸºæœ¬æ¦‚å¿µ</h1>
<p>VChartä¸»é¢˜åˆ‡æ¢æ˜¯ä¸€ä¸ªå¸¸è§çš„æ“ä½œï¼šä¾‹å¦‚æ ¹æ®ä¸åŒå­£èŠ‚ã€èŠ‚æ—¥ï¼Œæˆ–è€…æ˜¯å›½é™…åŒ–ã€ä¸ªæ€§åŒ–çš„é…è‰²æ–¹æ¡ˆï¼Œè¿˜æœ‰å¸¸è§çš„å¤œé—´æ¨¡å¼ï¼Œç”¨æˆ·å¯ä»¥æ‰‹åŠ¨æˆ–è€…ç›‘å¬ç”¨æˆ·ç³»ç»Ÿå¯¹åº”åˆ‡æ¢ä¸åŒé£æ ¼çš„ä¸»é¢˜ä»¥é€‚åº”ä¸åŒçš„ä½¿ç”¨ç¯å¢ƒã€‚    </p>
<h2 id="_2">ä¸»é¢˜æ›´æ–°æ¡ˆä¾‹</h2>
<p>ä¾‹å¦‚å¤œé—´æ¨¡å¼çš„æ³¨å†Œå’Œåˆ‡æ¢ï¼š    </p>
<pre class="codehilite"><code class="language-xml">VChart.ThemeManager.registerTheme('darkTheme', { ... });
VChart.ThemeManager.registerTheme('lightTheme', { ... });

function toggleTheme(isDarkMode) {
  const themeName = isDarkMode ? 'darkTheme' : 'lightTheme';
  VChart.ThemeManager.setCurrentTheme(themeName);
}    
</code></pre>

<p>ä¸åŒåº”ç”¨åœºæ™¯çš„é£æ ¼åˆ‡æ¢ï¼š    </p>
<pre class="codehilite"><code class="language-xml">// ä¸åŒé£æ ¼çš„ä¸»é¢˜é…ç½®
const themes = {
  'finance': { ... },
  'medical': { ... },
  'technology': { ... }
};

Object.keys(themes).forEach(key =&gt; {
  VChart.ThemeManager.registerTheme(key + 'Theme', themes[key]);
});

function switchDashboardTheme(businessType) {
  const themeName = businessType + 'Theme';
  VChart.ThemeManager.setCurrentTheme(themeName);
}    
</code></pre>

<h1 id="_3">ä¸»é¢˜ç›¸å…³æºç ä½ç½®ä¸å†…å®¹</h1>
<ul>
<li>
<p>package/vchart/scr/core/<strong>vchart.ts</strong>ï¼šå•ä¸ªå›¾è¡¨å®ä¾‹çš„ä¸»é¢˜æ›´æ–°æ‰§è¡Œè€…ï¼Œå®ç°å…·ä½“çš„ä¸»é¢˜åº”ç”¨é€»è¾‘ï¼Œå°†å…¨å±€ä¸»é¢˜è½¬åŒ–ä¸ºå›¾è¡¨çš„å®é™…æ ·å¼å˜æ›´ï¼Œå›¾è¡¨çš„æ›´æ–°é€»è¾‘ä¸»è¦åœ¨è¿™é‡Œã€‚    </p>
</li>
<li>
<p>package/vchart/src/core/instance-manager.tsï¼šå›¾è¡¨å®ä¾‹çš„æ³¨å†Œå’Œç®¡ç†ä¸­æ¢ï¼Œä¸ºä¸»é¢˜å®ä¾‹æ›´æ–°æä¾›éå†å’Œå®šä½çš„åŸºç¡€è®¾æ–½ï¼Œç¡®ä¿æ¯ä¸ªå›¾è¡¨éƒ½èƒ½æ¥æ”¶åˆ°ä¸»é¢˜æ›´æ–°ã€‚    </p>
</li>
<li>
<p>package/vchart/src/theme/theme-manager.ts: å…¨å±€ä¸»é¢˜è°ƒåº¦ä¸­å¿ƒï¼Œè´Ÿè´£ä¸»é¢˜çš„æ³¨å†Œã€è·å–å’Œå…¨å±€æ›´æ–°ï¼Œæä¾›ç»Ÿä¸€çš„ä¸»é¢˜ç®¡ç†å…¥å£å’Œåè°ƒæœºåˆ¶ã€‚    </p>
</li>
</ul>
<div style="padding:5px;background-color: rgb(255, 245, 235);border-color: rgb(255, 245, 235);">é€šè¿‡ `VChart` ç±»çš„æ–¹æ³•å®šä¹‰ï¼Œå®ç°å›¾è¡¨çš„æ ¸å¿ƒæ¸²æŸ“å’Œæ›´æ–°é€»è¾‘ï¼Œ`ThemeManager` å’Œ `InstanceManager` åˆ†åˆ«è´Ÿè´£ä¸»é¢˜å’Œå®ä¾‹çš„å…¨å±€ç®¡ç†ï¼Œå½¢æˆäº†ä¸€ä¸ªè§£è€¦ã€çµæ´»ä¸”å¯æ‰©å±•çš„å›¾è¡¨åº“æ¶æ„ï¼›    
å…¶ä¸­ `VChart` æä¾›ç»Ÿä¸€çš„æ›´æ–°å…¥å£ï¼Œå®ç°äº†ç»å¤§éƒ¨åˆ†çš„æ›´æ–°æ“ä½œé€»è¾‘ï¼›è€Œ`ThemeManager` å’Œ `InstanceManager` é€šè¿‡å®ä¾‹æ³¨å†Œå’Œéå†æœºåˆ¶ï¼Œå®ç°äº†å…¨å±€ä¸»é¢˜æ›´æ–°çš„èƒ½åŠ›ã€‚    
</div>
<h1 id="_4">æ·±å…¥åˆ†æä¸»é¢˜æ›´æ–°æµç¨‹</h1>
<p>VChart å®˜ç½‘æŠŠä¸»é¢˜æ›´æ–°åˆ†ä¸ºäº†ä¸¤ä¸ªç»´åº¦ï¼Œå³    </p>
<ul>
<li>
<p>å•ç‹¬æ›´æ–°<strong>æŸä¸ªå›¾è¡¨å®ä¾‹</strong>çš„ä¸»é¢˜    </p>
</li>
<li>
<p>é€šè¿‡ <code>ThemeManager</code>æ›´æ–°<strong>å…¨å±€æ‰€æœ‰å›¾è¡¨</strong>çš„ä¸»é¢˜ã€‚    </p>
</li>
</ul>
<p>å…·ä½“åšæ³•å¯ä»¥è®¿é—®<a href="https://www.visactor.io/vchart/guide/tutorial_docs/Theme/Customize_Theme">ğŸ VisActor Data Visualization Competition</a>æŸ¥çœ‹ã€‚ä¸¤ç§åšæ³•éƒ½æ˜¯é€šè¿‡åŒæ ·çš„æ–¹æ³•<code>setCurrentTheme</code>è°ƒç”¨æ¥åˆ‡æ¢ä¸»é¢˜ï¼Œå‰è€…æ˜¯ä½¿ç”¨VChartå¯¹è±¡ç”Ÿæˆçš„å®ä¾‹è°ƒç”¨ï¼Œæ›´æ–°çš„æ˜¯å•ä¸ªå›¾è¡¨ï¼›åè€…é€šè¿‡<code>ThemeManager</code>è°ƒç”¨ï¼Œæ›´æ–°äº†å…¨å±€å›¾è¡¨ä¸»é¢˜ã€‚æ‰€ä»¥ï¼Œæˆ‘é˜…è¯»æºç çš„æ€è·¯æ˜¯åŸºäº<code>setCurrentTheme</code>è¿™ä¸ªæ–¹æ³•çš„å£°æ˜ã€å®šä¹‰æ¥å±‚å±‚æ·±å…¥çš„ã€‚    </p>
<h2 id="_5">ç¤ºä¾‹ï¼š</h2>
<p>å•ä¸ªå®ä¾‹çš„æ›´æ–°ï¼š    </p>
<pre class="codehilite"><code class="language-xml">const vchart = new VChart(spec, { dom: CONTAINER_ID });
//å•ä¸ªthemeå®ä¾‹çš„æ›´æ–°
vchart.setCurrentTheme('userTheme');    
</code></pre>

<p>å…¨å±€ä¸»é¢˜çš„æ›´æ–°ï¼š    </p>
<pre class="codehilite"><code class="language-xml">// æ³¨å†Œä¸»é¢˜
VChart.ThemeManager.registerTheme('userTheme', theme);
//å…¨å±€ä¸»é¢˜æ›´æ–°
VChart.ThemeManager.setCurrentTheme('userTheme');    
</code></pre>

<h2 id="vchartts">ä¸»é¢˜æ›´æ–°æ‰§è¡Œè€…ï¼šVChart.ts</h2>
<p>åˆ†ææ›´æ–°è¡Œä¸ºï¼Œé‡ç‚¹æ˜¯é˜…è¯»è¿™ä¸€æ¡è°ƒç”¨é“¾ï¼š    </p>
<p><code>setCurrentTheme()</code>â†’ <code>setCurrentThemeSync()</code>&amp;<code>updateCustomConfigAndRerender()</code>â†’ <code>_setCurrentTheme()</code>çš„æ‰§è¡Œè¿‡ç¨‹    </p>
<h3 id="_setcurrenttheme"><code>_setCurrentTheme()</code></h3>
<pre class="codehilite"><code class="language-xml"> protected _setCurrentTheme(name?: string): IUpdateSpecResult {
    this._updateCurrentTheme(name);
    this._initChartSpec(this._getSpecFromOriginalSpec(), 'setCurrentTheme');
    this._chart?.setCurrentTheme();
    return { change: true, reMake: false };
  }    
</code></pre>

<p>é¦–å…ˆåˆ†æå†…éƒ¨ç§æœ‰æ–¹æ³•_setCurrentThemeï¼Œå…ˆè§¦å‘<code>_updateCurrentTheme</code>ï¼Œè¿›å…¥11-1è®²è§£çš„ä¸»é¢˜çš„åˆå¹¶ï¼Œè§£ææµç¨‹ï¼Œæ¥ä¸‹æ¥é‡æ–°åˆå§‹åŒ–å›¾è¡¨è§„æ ¼ï¼ˆspecï¼‰ï¼Œ<code>chart</code> æ˜¯å›¾è¡¨çš„æ ¸å¿ƒæ¸²æŸ“å®ä¾‹ï¼Œè´Ÿè´£å…·ä½“çš„æ¸²æŸ“å’Œäº¤äº’é€»è¾‘ï¼Œè¿™é‡Œè°ƒç”¨äº†<code>setCurrentTheme</code>è¿™ä¸ªæ–¹æ³•ï¼Œä¸‹é¢ä¼šé‡ç‚¹è§£æã€‚    </p>
<p>æœ€åè¿”å›çš„{ change: true, reMake: false }ï¼Œchangeè¡¨ç¤ºï¼šè¡¨ç¤ºé…ç½®å·²å‘ç”Ÿå˜æ›´ï¼Œè§¦å‘é‡æ–°æ¸²æŸ“ï¼Œå‘Šè¯‰æ¸²æŸ“å¼•æ“éœ€è¦æ›´æ–°ï¼ŒreMakeè¡¨ç¤ºä¸éœ€è¦å®Œå…¨é‡å»ºå›¾è¡¨ï¼Œåªéœ€è¦å±€éƒ¨æ›´æ–°å³å¯ã€‚è¿”å›è¿™ä¸ªç»“æ„æ˜¯ä¸ºäº†åœ¨åç»­çš„<code>setCurrentThemeSync</code>ä¸­çš„ <code>updateCustomConfigAndRerender</code>ä¸­è§¦å‘å›¾è¡¨çš„æ›´æ–°è¡Œä¸ºã€‚    </p>
<h3 id="setcurrentthemesync-updatecustomconfigandrerender"><code>setCurrentThemeSync()</code>  &amp;  <code>updateCustomConfigAndRerender()</code></h3>
<pre class="codehilite"><code class="language-xml"> /**
   * **åŒæ­¥æ–¹æ³•** è®¾ç½®å½“å‰ä¸»é¢˜ã€‚
   * **æ³¨æ„ï¼Œå¦‚æœåœ¨ spec ä¸Šé…ç½®äº† themeï¼Œåˆ™ spec ä¸Šçš„ theme ä¼˜å…ˆçº§æ›´é«˜ã€‚**
   * @param name ä¸»é¢˜åç§°
   * @returns
   */
  setCurrentThemeSync(name: string) {
    if (!ThemeManager.themeExist(name)) {
      return this as unknown as IVChart;
    }
    const result = this._setCurrentTheme(name);
    this._setFontFamilyTheme(this._currentTheme?.fontFamily as string);
    this.updateCustomConfigAndRerender(result, true, {
      transformSpec: false,
      actionSource: 'setCurrentTheme'
    });
    return this as unknown as IVChart;
  }    
</code></pre>

<p>åˆ¤ç©ºåï¼Œé¦–å…ˆæ‹¿åˆ°äº†{ change: true, reMake: false }è¿™ä¸ªçº¦å®šå¥½çš„å¯¹è±¡ï¼Œæ„ä¸ºä¸»é¢˜æ›´æ–°ï¼Œå¿…é¡»è§¦å‘é‡æ–°æ¸²æŸ“ï¼Œä½†æ˜¯ä¸éœ€è¦å®Œå…¨é‡å»ºè¡¨æ ¼ï¼Œåªæ˜¯å±€éƒ¨æ›´æ–°å³å¯ã€‚    </p>
<h4 id="updatecustomconfigandrerender"><code>updateCustomConfigAndRerender()</code></h4>
<pre class="codehilite"><code class="language-xml">   //result: { change: true, reMake: false };

   //è°ƒç”¨updateCustomConfigAndRerender
   this.updateCustomConfigAndRerender(result, true, {
      transformSpec: false,
      actionSource: 'setCurrentTheme'
   });

  //updateCustomConfigAndRerenderå…·ä½“å®ç°
  updateCustomConfigAndRerender(
    updateSpecResult: IUpdateSpecResult | (() =&gt; IUpdateSpecResult),
    sync?: boolean,
    option: IVChartRenderOption = {}
  ) {
    if (this._isReleased || !updateSpecResult) {
      return undefined;
    }
    if (isFunction(updateSpecResult)) {
      updateSpecResult = updateSpecResult();
    }

    if (updateSpecResult.reAnimate) {
      this.stopAnimation();
      this._updateAnimateState(true);
    }

    this._reCompile(updateSpecResult);
    if (sync) {
      return this._renderSync(option);
    }
    return this._renderAsync(option);
  }
</code></pre>

<p><code>updateCustomConfigAndRerender</code> æ˜¯ä¸»é¢˜é‡æ¸²æŸ“çš„æ ¸å¿ƒé€»è¾‘ï¼Œä¹Ÿæ˜¯ä»»ä½•ä¸»é¢˜é…ç½®æ›´æ”¹ï¼ˆæ•°æ®æ¨¡å‹ã€å›¾è¡¨specç­‰å‘ç”Ÿæ›´æ”¹æ—¶ï¼‰é‡æ¸²æŸ“çš„æ ¸å¿ƒã€‚åœ¨ä¸»é¢˜æ›´æ–°é‡Œçš„é€»è¾‘å¹¶ä¸å¤æ‚ï¼Œå› ä¸ºä¼ å…¥çš„<code>updateSpecResult</code>ï¼š{ change: true, reMake: false } å¹¶ä¸åŒ…æ‹¬åŠ¨ç”»å¤„ç†ã€ä¹Ÿä¸æ˜¯å‡½æ•°ç±»å‹ï¼Œåªæ‰§è¡Œäº†<code>_reCompile()</code>å’Œ<code>_renderSync()</code>;    </p>
<h5 id="recompile"><code>recompile()</code></h5>
<pre class="codehilite"><code class="language-xml">  protected _reCompile(updateResult: IUpdateSpecResult, morphConfig?: IMorphConfig) {
    if (updateResult.reMake) {
      this._releaseData();
      this._initDataSet();
      this._chart?.release();
      this._chart = null as unknown as IChart;
    }

    if (updateResult.reTransformSpec) {
      // é‡Šæ”¾å›¾è¡¨ç­‰ç­‰
      this._chartSpecTransformer = null;
    }

    // å¸è½½äº†chartä¹‹åå†è®¾ç½®ä¸»é¢˜ é¿å…å¤šä½™çš„reInit
    if (updateResult.changeTheme) {
      this._setCurrentTheme();
      this._setFontFamilyTheme(this._currentTheme?.fontFamily as string);
    } else if (updateResult.changeBackground) {
      this._compiler?.setBackground(this._getBackground());
    }

    if (updateResult.reMake) {
      // å¦‚æœä¸éœ€è¦åŠ¨ç”»ï¼Œé‚£ä¹ˆé‡Šæ”¾itemï¼Œé¿å…å…ƒç´ æ®‹ç•™
      this._compiler?.releaseGrammar(this._option?.animation === false || this._spec?.animation === false);
      // chart å†…éƒ¨äº‹ä»¶ æ¨¡å—è‡ªå·±å¿…é¡»åˆ é™¤
      // å†…éƒ¨æ¨¡å—åˆ é™¤äº‹ä»¶æ—¶ï¼Œè°ƒç”¨äº†event Dispatcher.release() å¯¼è‡´ç”¨æˆ·äº‹ä»¶è¢«ä¸€èµ·åˆ é™¤
      // å¤–éƒ¨äº‹ä»¶ç°åœ¨éœ€è¦é‡æ–°æ·»åŠ 
      this._userEvents.forEach(e =&gt; this._event?.on(e.eType as any, e.query as any, e.handler as any));

      if (updateResult.reSize) {
        this._doResize();
      }
    } else {
      if (updateResult.reCompile) {
        // recompile
        // æ¸…é™¤ä¹‹å‰çš„æ‰€æœ‰ compile å†…å®¹
        this._compiler?.clear(
          { chart: this._chart, vChart: this },
          this._option?.animation === false || this._spec?.animation === false
        );
        // TODO: é‡Šæ”¾äº‹ä»¶ï¼Ÿ vgrammar çš„ view åº”è¯¥ä¸éœ€è¦é‡Šæ”¾ï¼Œå“åº”çš„stageä¹Ÿæ²¡æœ‰é‡Šæ”¾ï¼Œæ‰€ä»¥äº‹ä»¶å¯ä»¥ä¸ç»‘å®š
        // é‡æ–°ç»‘å®šäº‹ä»¶
        // TODO: é‡Šæ”¾XXï¼Ÿ
        // é‡æ–°compile
        this._compiler?.compile({ chart: this._chart, vChart: this }, {});
      }
      if (updateResult.reSize) {
        const { width, height } = this.getCurrentSize();
        this._chart.onResize(width, height, false);
        this._compiler.resize(width, height, false);
      }
    }
  }    
</code></pre>

<ul>
<li>
<p>reMakeä¸ºtrueæ—¶ä¼šé€šè¿‡<code>_releaseData</code>ã€<code>_initDataSet</code>ã€<code>release</code>å½»åº•é‡ç½®å›¾è¡¨ï¼Œé‡Šæ”¾æ‰€æœ‰ç›¸å…³èµ„æºï¼Œä¸ºé‡æ–°æ¸²æŸ“åšå‡†å¤‡ã€‚å½“ç„¶å‰é¢æåˆ°äº†ï¼Œä¸»é¢˜æ›´æ–°å¹¶ä¸ä¼šå®Œå…¨é‡ç½®å›¾è¡¨ã€‚    </p>
</li>
<li>
<p>reMakeä¸ºfalseæ—¶ï¼Œä¼šæ ¹æ®<code>reCompile</code>å’Œ<code>reSize</code>çš„å€¼åˆ†åˆ«æ‰§è¡Œé‡æ–°compile å’Œ å›¾è¡¨çš„å°ºå¯¸é‡ç½®ï¼Œæ“ä½œä¾‹å¦‚<code>_chart</code>ã€<code>_compiler</code>ç­‰å®ä¾‹ä¸Šçš„æ–¹æ³•å®ç°ã€‚    </p>
</li>
</ul>
<p>é˜…è¯»æºç åå¾—çŸ¥ï¼Œä¸»é¢˜æ›´æ–°æ—¶å…¶å®ä¹Ÿä¸ä¼šè§¦å‘reCompileæ“ä½œï¼Œä¸€èˆ¬æ˜¯å›¾å½¢æœ‰å¢å‡ï¼Œæ‰éœ€è¦reCompileã€‚    </p>
<h5 id="_rendersync"><code>_renderSync()</code></h5>
<pre class="codehilite"><code class="language-xml">  protected _renderSync = (option: IVChartRenderOption = {}) =&gt; {
    const self = this as unknown as IVChart;
    if (!this._beforeRender(option)) {
      return self;
    }
    // å¡«å……æ•°æ®ç»˜å›¾
    this._compiler?.render(option.morphConfig);
    this._afterRender();
    return self;
  };
</code></pre>

<p>è¿™æ˜¯ä¸€ä¸ªåŒæ­¥æ¸²æŸ“æ–¹æ³•ï¼Œé€šè¿‡ <code>_beforeRender</code> è¿›è¡Œæ¸²æŸ“å‰çš„å‡†å¤‡å’Œæ£€æŸ¥ï¼Œç¡®ä¿æ¸²æŸ“æ¡ä»¶æ»¡è¶³ï¼›è°ƒç”¨ <code>_compiler</code> çš„ <code>render</code> æ–¹æ³•æ‰§è¡Œå®é™…çš„å›¾è¡¨ç»˜åˆ¶ï¼Œå¯ä»¥ä¼ å…¥å˜å½¢é…ç½®ï¼›å®Œæˆç»˜åˆ¶ <code>_afterRender</code> è¿›è¡Œæ¸²æŸ“åçš„æ¸…ç†å’ŒçŠ¶æ€æ›´æ–°ï¼Œå¹¶è¿”å›å½“å‰å®ä¾‹ã€‚    </p>
<h2 id="_6">å®ç°å…¨å±€æ›´æ–°çš„åŸç†</h2>
<h3 id="theme-manager">ä¸»é¢˜è°ƒåº¦ä¸­å¿ƒ theme-manager</h3>
<p>å‰é¢æåˆ°VChartå®ä¾‹æ›´æ–°ä¸»é¢˜æ˜¯é’ˆå¯¹ä¸€ä¸ªå›¾è¡¨æ¥æ›´æ–°çš„ï¼Œè€ŒthemeManageræ˜¯æ›´æ–°å…¨å±€çš„ä¸»é¢˜    </p>
<div style="padding:5px;background-color: rgb(255, 245, 235);border-color: rgb(255, 245, 235);">https://www.visactor.io/vchart/guide/tutorial_docs/Theme/Customize_Theme    
åœ¨`ThemeManager`æ³¨å†Œä¸»é¢˜åï¼Œå¯ä»¥ç”¨ `ThemeManager.setCurrentTheme` é€šè¿‡ä¸»é¢˜åç§°æ¥çƒ­æ›´æ–°å·²æ³¨å†Œçš„ä¸»é¢˜ã€‚æ³¨æ„ï¼šè¿™ä¸ªæ–¹æ³•å°†å½±å“é¡µé¢ä¸Šçš„æ‰€æœ‰å›¾è¡¨å®ä¾‹ã€‚    
</div>

<pre class="codehilite"><code class="language-xml">  static setCurrentTheme(name: string) {
    if (!ThemeManager.themeExist(name)) {
      return;
    }
    ThemeManager._currentThemeName = name;
    InstanceManager.forEach((instance: IVChart) =&gt; instance?.setCurrentTheme(name));
  }    
</code></pre>

<p>ä¸éš¾çœ‹å‡º è¿™ä¸ªæ–¹æ³•å…¨å±€è®¾ç½®å½“å‰ä¸»é¢˜åï¼Œç„¶åéå†æ‰€æœ‰å·²æ³¨å†Œçš„å›¾è¡¨å®ä¾‹ï¼ˆinstanceï¼‰å¹¶å¯¹æ¯ä¸ªå®ä¾‹è°ƒç”¨ <code>setCurrentTheme</code>ï¼Œä»è€Œå®ç°äº†å…¨å±€å®ä¾‹çš„ä¸»é¢˜æ›´æ–°ã€‚    </p>
<h3 id="instance-manager">ä¸»é¢˜å®ä¾‹æ“ä½œçš„åŸå›  instance-manager</h3>
<p>instanceå¯¹å›¾è¡¨çš„æ“ä½œï¼Œå…¶å®æ˜¯å› ä¸ºåœ¨VChartç±»çš„æ„é€ å‡½æ•°å†…ï¼Œå°†å½“å‰ VChart å®ä¾‹æ³¨å†Œåˆ° <code>InstanceManager.instances</code> ä¸­ï¼Œä»è€Œæ”¯æŒå…¨å±€æ“ä½œï¼Œå¦‚ç»Ÿä¸€æ›´æ–°ä¸»é¢˜ã€‚    </p>
<pre class="codehilite"><code class="language-xml">  export class VChart implements IVChart {
      constructor(spec: ISpec, options: IInitOption) {
          //......å…¶ä»–
          InstanceManager.registerInstance(this);
      }
 }    
</code></pre>

<h1 id="_7">ç»“è¯­</h1>
<p>æ€»ä¹‹ï¼Œvchart.tsé‡Œåœ¨VChartç±»é‡Œå®ç°äº†æ›´æ–°çš„ç»å¤§éƒ¨åˆ†æ“ä½œï¼Œä¸ä»…ä»…æ˜¯ä¸»é¢˜æ›´æ–°ï¼Œä¹Ÿæ¶‰åŠåˆ°å…¶ä½™éœ€è¦æ›´æ–°çš„æƒ…å†µã€‚ä¸»é¢˜æ›´æ–°åªæ˜¯å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼›theme-managerå’Œinstance-manageré€šè¿‡å¯¹äºå®ä¾‹çš„æ³¨å†Œï¼Œéå†ï¼Œè®©å¼€å‘è€…å¯ä»¥é€šè¿‡ThemeManageræ¥ç®¡ç†å…¨å±€æ›´æ–°ä¸»é¢˜ï¼Œå®ç°äº†ä¸»é¢˜çš„å•ä¸ªå®ä¾‹æ›´æ–°å’Œå…¨å±€æ›´æ–°ã€‚    </p>
<hr />
<h1 id="_8">æœ¬æ–‡æ¡£ç”±ä»¥ä¸‹äººå‘˜æä¾›</h1>
<p>å¨å¨ï¼ˆhttps://github.com/Shabi-xï¼‰    </p>
<p># æœ¬æ–‡æ¡£ç”±ä»¥ä¸‹äººå‘˜ä¿®æ­£æ•´ç† 
 <a href="https://github.com/xuanhun">ç„é­‚</a></p>
</body>
</html>