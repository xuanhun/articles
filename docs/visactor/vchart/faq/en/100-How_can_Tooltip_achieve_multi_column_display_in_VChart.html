<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>100-How_can_Tooltip_achieve_multi_column_display_in_VChart</title>
    <meta name="keywords" content="">
    <style>
        body {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
            line-height: 1.6;
            color: #24292e;
            background-color: #fff;
        }
        h1, h2, h3, h4, h5, h6 {
            margin-top: 24px;
            margin-bottom: 16px;
            font-weight: 600;
            line-height: 1.25;
        }
        h1 { font-size: 2em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
        h2 { font-size: 1.5em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
        h3 { font-size: 1.25em; }
        code {
            padding: 0.2em 0.4em;
            margin: 0;
            font-size: 85%;
            background-color: rgba(27,31,35,0.05);
            border-radius: 3px;
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
        }
        pre {
            padding: 16px;
            overflow: auto;
            font-size: 85%;
            line-height: 1.45;
            background-color: #f6f8fa;
            border-radius: 6px;
        }
        pre code {
            background-color: transparent;
            padding: 0;
            font-size: 100%;
        }
        img {
            max-width: 100%;
            height: auto;
            box-sizing: content-box;
            background-color: #fff;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 16px 0;
            display: block;
            overflow: auto;
        }
        table th, table td {
            padding: 6px 13px;
            border: 1px solid #d0d7de;
        }
        table th {
            font-weight: 600;
            background-color: #f6f8fa;
        }
        table tr {
            background-color: #fff;
            border-top: 1px solid #d0d7de;
        }
        table tr:nth-child(2n) {
            background-color: #f6f8fa;
        }
        a {
            color: #0969da;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        blockquote {
            padding: 0 1em;
            color: #656d76;
            border-left: 0.25em solid #d0d7de;
            margin: 0 0 16px 0;
        }
        hr {
            height: 0.25em;
            padding: 0;
            margin: 24px 0;
            background-color: #d0d7de;
            border: 0;
        }
        ul, ol {
            padding-left: 2em;
        }
        li + li {
            margin-top: 0.25em;
        }
    </style>
</head>
<body>
    <h1 id="how-can-tooltip-achieve-multi-column-display-in-vchart">How can Tooltip achieve multi column display in VChart？</h1>
<h1 id="question-description">Question Description</h1>
<p>Seemly to（ https://visactor.io/vchart/demo/line-chart/null-value-line ）I hope ToolTip can format such a chart into multiple columns
<img alt="demo" src="/vchart/faq/96-0.png" /></p>
<h1 id="solution">Solution</h1>
<p>The solutions for different chart libraries are different. According to the demo you provided, in VChart, you need to implement the multi column style of tooltips through the custom tooltip function.
<img alt="demo" src="/vchart/faq/96-1.png" /></p>
<h1 id="code-example">Code Example</h1>
<pre class="codehilite"><code class="language-ts">const data = [
  { year: '2012', type: 'Forest', value: 320 },
  { year: '2012', type: 'Steppe', value: 220 },
  { year: '2012', type: 'Desert', value: 150 },
  { year: '2012', type: 'Wetland', value: 98 },
  { year: '2013', type: 'Forest', value: 332 },
  { year: '2013', type: 'Steppe', value: 182 },
  { year: '2013', type: 'Desert', value: 232 },
  { year: '2013', type: 'Wetland', value: 77 },
  { year: '2014', type: 'Forest', value: 301 },
  { year: '2014', type: 'Steppe', value: 191 },
  { year: '2014', type: 'Desert', value: 201 },
  { year: '2014', type: 'Wetland', value: 101 },
  { year: '2015', type: 'Forest', value: 334 },
  { year: '2015', type: 'Steppe', value: 234 },
  { year: '2015', type: 'Desert', value: 154 },
  { year: '2015', type: 'Wetland', value: 99 },
  { year: '2016', type: 'Forest', value: 390 },
  { year: '2016', type: 'Steppe', value: 290 },
  { year: '2016', type: 'Desert', value: 190 },
  { year: '2016', type: 'Wetland', value: 40 }
];
const aggregation = {};
data.forEach(({ year, value }) =&gt; {
  if (!aggregation[year]) {
    aggregation[year] = 0;
  }
  aggregation[year] += value;
});
const spec = {
  type: 'bar',
  data: [
    {
      id: 'bar',
      values: data
    }
  ],
  xField: ['year', 'type'],
  yField: 'value',
  seriesField: 'type',
  bar: {
    state: {
      legend_hover_reverse: {
        fill: '#ccc'
      }
    }
  },
  legends: {
    visible: true
  },
  tooltip: {
    mark: {
      title: {
        value: datum =&gt; datum['year'] + '年'
      },
      content: [
        {
          key: datum =&gt; datum['type'],
          value: datum =&gt; datum['value']
        },
        {
          hasShape: false,
          key: 'Proportion',
          value: datum =&gt; Math.round((datum['value'] / aggregation[datum['year']]) * 10000) / 100 + '%'
        }
      ]
    },
    dimension: {
      title: {
        value: datum =&gt; datum['year'] + '年'
      },
      content: [
        {
          key: datum =&gt; datum['type'],
          value: datum =&gt; datum['value']
        },
        {
          hasShape: false,
          key: datum =&gt; datum['type'] + ' Proportion',
          value: datum =&gt; Math.round((datum['value'] / aggregation[datum['year']]) * 10000) / 100 + '%'
        }
      ]
    }
  }
};

const vchart = new VChart(spec, { dom: CONTAINER_ID });
vchart.renderSync();

vchart.setTooltipHandler({
  showTooltip: (activeType, tooltipData, params) =&gt; {
    // some code of custom tooltip
    let tooltip = document.getElementById('custom-tooltip');
    console.log(params);
    if (!tooltip) {
      tooltip = document.createElement('div');
      tooltip.id = 'custom-tooltip';
      document.getElementById(CONTAINER_ID).appendChild(tooltip);
      const title = document.createElement('p');
      title.id = 'custom-tooltip-title';
      title.style['fontWeight'] = 'bolder';
      tooltip.appendChild(title);
      const content = document.createElement('div');
      content.id = 'custom-tooltip-content';
      content.style.display = 'flex';
      content.style.flexDirection = 'row';
      tooltip.appendChild(content);
      const leftC = document.createElement('div');
      leftC.style.display = 'flex';
      leftC.style.flexDirection = 'column';
      leftC.style.justifyContent = 'center';
      const s = document.createElement('div');
      s.id = 'custom-tooltip-symbol';
      s.style.width = '10px';
      s.style.height = '10px';
      leftC.appendChild(s);
      const rightC = document.createElement('div');
      rightC.style.width = '200px';
      rightC.style.display = 'flex';
      rightC.style.justifyContent = 'space-around';
      content.appendChild(leftC);
      content.appendChild(rightC);
      const r1 = document.createElement('div');
      r1.id = 'custom-tooltip-r1';
      const r2 = document.createElement('div');
      r2.id = 'custom-tooltip-r2';
      const r3 = document.createElement('div');
      r3.id = 'custom-tooltip-r3';
      r3.style.color = 'grey';
      rightC.appendChild(r1);
      rightC.appendChild(r2);
      rightC.appendChild(r3);
    }

    if (!tooltip || activeType !== 'mark') return;
    const datum = tooltipData[0].datum[0];
    const series = tooltipData[0].series;
    console.log(activeType, tooltipData, params, datum);
    tooltip.style.visibility = 'visible';
    tooltip.style.left = params.event.x + 20 + 'px';
    tooltip.style.top = params.event.y + 20 + 'px';
    tooltip.style.position = 'absolute';
    tooltip.style.background = 'white';
    tooltip.style.padding = '10px';
    const title = document.getElementById('custom-tooltip-title');
    title.innerText = datum['year'] + '年';
    const s = document.getElementById('custom-tooltip-symbol');
    s.style.background = series.getSeriesStyle(datum)('fill');
    const r1 = document.getElementById('custom-tooltip-r1');
    const r2 = document.getElementById('custom-tooltip-r2');
    const r3 = document.getElementById('custom-tooltip-r3');
    r1.innerText = datum['type'];
    r2.innerText = Math.round((datum['value'] / aggregation[datum['year']]) * 10000) / 100 + '%';
    r3.innerText = datum['value'];
  },
  hideTooltip: () =&gt; {
    // hide your custom tooltip
    const tooltip = document.getElementById('custom-tooltip');
    if (!tooltip) return;
    tooltip.style.visibility = 'hidden';
  }
});

// Just for the convenience of console debugging, DO NOT COPY!
window['vchart'] = vchart;
</code></pre>

<h1 id="results">Results</h1>
<p>Online demo：https://codesandbox.io/s/tooltip-multicolumn-j9s8x7
<img alt="result" src="/vchart/faq/96-2.png" /></p>
<h1 id="related-documentation">Related Documentation</h1>
<p>Tooltip 教程：https://visactor.io/vchart/guide/tutorial_docs/Chart_Concepts/Tooltip
相关 api：https://visactor.io/vchart/option/barChart#tooltip.visible
github：https://github.com/VisActor/VChart</p>
</body>
</html>