<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŠ¥è¡¨ä¼˜åŒ–å®æˆ˜ï¼šç»„ä»¶åº“Tableå‡çº§VTable</title>
    <meta name="keywords" content="VisActor,VChart,VTable,VStrory,VMind,VGrammar,VRender,Visualization,Chart,Data,Table,Graph,Gis,LLM">
    <style>
        body {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
            line-height: 1.6;
            color: #24292e;
            background-color: #fff;
        }
        h1, h2, h3, h4, h5, h6 {
            margin-top: 24px;
            margin-bottom: 16px;
            font-weight: 600;
            line-height: 1.25;
        }
        h1 { font-size: 2em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
        h2 { font-size: 1.5em; border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; }
        h3 { font-size: 1.25em; }
        code {
            padding: 0.2em 0.4em;
            margin: 0;
            font-size: 85%;
            background-color: rgba(27,31,35,0.05);
            border-radius: 3px;
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
        }
        pre {
            padding: 16px;
            overflow: auto;
            font-size: 85%;
            line-height: 1.45;
            background-color: #f6f8fa;
            border-radius: 6px;
        }
        pre code {
            background-color: transparent;
            padding: 0;
            font-size: 100%;
        }
        img {
            max-width: 100%;
            height: auto;
            box-sizing: content-box;
            background-color: #fff;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 16px 0;
            display: block;
            overflow: auto;
        }
        table th, table td {
            padding: 6px 13px;
            border: 1px solid #d0d7de;
        }
        table th {
            font-weight: 600;
            background-color: #f6f8fa;
        }
        table tr {
            background-color: #fff;
            border-top: 1px solid #d0d7de;
        }
        table tr:nth-child(2n) {
            background-color: #f6f8fa;
        }
        a {
            color: #0969da;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        blockquote {
            padding: 0 1em;
            color: #656d76;
            border-left: 0.25em solid #d0d7de;
            margin: 0 0 16px 0;
        }
        hr {
            height: 0.25em;
            padding: 0;
            margin: 24px 0;
            background-color: #d0d7de;
            border: 0;
        }
        ul, ol {
            padding-left: 2em;
        }
        li + li {
            margin-top: 0.25em;
        }
    </style>
</head>
<body>
    <h1 id="_1"><strong>ä¸€ã€ä»·å€¼èšç„¦</strong></h1>
<p><strong>æ¸²æŸ“æ€§èƒ½ä¸åŠ¨æ€èƒ½åŠ›å…¨é¢å‡çº§</strong></p>
<ul>
<li>
<p><strong>ğŸš€ æ€§èƒ½ç“¶é¢ˆçªç ´</strong></p>
</li>
<li>
<p><strong>ç”¨æˆ·ä½“éªŒ</strong>ï¼šä½é…è€æ—§æœºå‹ä½¿ç”¨æµç•…åº¦æå‡ï¼Œæ— å¡é¡¿ç°è±¡ï¼ŒFPS æ¥è¿‘æ»¡å¸§</p>
</li>
<li>
<p><strong>å…³é”®æŒ‡æ ‡</strong>ï¼šé¡µé¢æµè§ˆä½“æ„Ÿè€—æ—¶é™ä½ 500ms ï¼ŒINP é™ä½ 50% </p>
</li>
<li>
<p><strong>å†…å­˜å ç”¨</strong>ï¼šcanvas æ¸²æŸ“æ¨¡å‹æ›¿ä»£ DOM æ–¹æ¡ˆï¼Œå†…å­˜ä½¿ç”¨ã€å›æ”¶æ•ˆç‡æ˜¾è‘—ä¼˜åŒ–</p>
</li>
<li>
<p><strong>ğŸ’¡ åŠ¨æ€åŠŸèƒ½å¼€ç®±å³ç”¨</strong></p>
</li>
<li>
<p><strong>äº¤äº’èƒ½åŠ›</strong>ï¼šè‡ªåŠ¨åˆ—å®½ã€åˆ—æ‹–æ‹½è°ƒæ•´ã€å¤šçº§è¡¨å¤´ã€å³é”®èœå•ç­‰è¡¨æ ¼éœ€æ±‚å¼€å‘æ•ˆç‡æå‡</p>
</li>
<li>
<p><strong>æ‰©å±•æ½œåŠ›</strong>ï¼šåŸºäºVRender ç»Ÿä¸€æ¸²æŸ“å¼•æ“ï¼Œä¸ VChart åŒæºæŠ€æœ¯æ ˆï¼Œå¤©ç„¶æ”¯æŒå•å…ƒæ ¼å†…åµŒå›¾è¡¨ã€æ•°æ®ä¸Šä¸‹é’»ç­‰ BI åœºæ™¯</p>
</li>
<li>
<p><strong>ğŸ› ï¸ æ¶æ„è§£è€¦</strong></p>
</li>
<li>
<p><strong>æŠ€æœ¯å€ºåŠ¡æ¸…ç†</strong>ï¼šé€šè¿‡é€‚é…å±‚å‰¥ç¦»æ—§ç»„ä»¶åº“è€¦åˆï¼Œä»£ç ç»´æŠ¤æˆæœ¬é™ä½<strong>ï¼Œ</strong>ä»£ç é‡é™ä½</p>
</li>
<li>
<p><strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼š åŸºäº VTable API è®¾è®¡ï¼Œå®ç°ä¸šåŠ¡é€»è¾‘ä¸ UI æ¸²æŸ“çš„è§£è€¦ï¼›å°†äº‹ä»¶ã€ä¸»é¢˜ã€æ•°æ®åŠ è½½ç­‰é€»è¾‘æ‹†åˆ†ä¸ºç‹¬ç«‹æ¨¡å—ï¼Œåˆ†æ‰¹æ³¨å…¥ </p>
</li>
</ul>
<h1 id="_2"><strong>äºŒã€èƒŒæ™¯é˜è¿°</strong></h1>
<p><strong>é‡æ„çš„å¿…ç„¶æ€§</strong></p>
<ol>
<li>
<p><strong>å…³é”®æŒ‡æ ‡åŠ£åŒ–</strong></p>
</li>
<li>
<p>é¡µé¢å‘ˆç°ä½“æ„Ÿè€—æ—¶ 5s ï¼ˆæ ‡å‡†å€¼éœ€ &lt; 2sï¼‰ï¼Œç”¨æˆ·ç­‰å¾…æ—¶é—´è¿‡ä¹…ï¼Œå½±å“ç”¨æˆ·ä½“éªŒï¼Œå¯¼è‡´ç”¨æˆ·æµå¤±ï¼›</p>
</li>
<li>
<p>INP 700ms ï¼ˆweb vitals çº¦å®š &lt; 200ms goodï¼Œ &gt;500 ms poor ï¼‰ï¼Œäº¤äº’å¡é¡¿å¯¼è‡´æ“ä½œä¸­æ–­ç‡æ¿€å¢ï¼Œæ“ä½œè¿ç»´æ•ˆç‡é™ä½</p>
</li>
<li>
<p>å¡é¡¿æ˜¾è‘—ï¼š åœ¨ Intel i7 macbookpro æµè§ˆã€æ“ä½œæŠ¥è¡¨ï¼ŒFPS å¹³å‡ 48 å¸§ï¼Œä¸”é¢‘ç¹æ‰å¸§</p>
</li>
<li>
<p><strong>æŠ€æœ¯å€ºåˆ¶çº¦</strong></p>
</li>
<li>
<p>ç»„ä»¶åº“ç‰ˆæœ¬ï¼šå½“å‰ä½¿ç”¨ç»„ä»¶åº“0.xç‰ˆ Table ä¸æ”¯æŒåŠ¨æ€è°ƒæ•´åˆ—å®½ã€å³é”®èœå•ã€æ€»è®¡ç­‰åŠŸèƒ½ï¼Œä¸”0.xç‰ˆæœ¬å·²ä¸å†ç»´æŠ¤ï¼Œæ— æ³•å¹³æ»‘å‡çº§ 1.x ç‰ˆæœ¬ï¼Œæ­¤å¤–å‡çº§åæ— æ³•ä¿è¯åŠŸèƒ½ä¸æ€§èƒ½é—®é¢˜å¾—åˆ°è§£å†³</p>
</li>
<li>
<p>ç»´æŠ¤æˆæœ¬é«˜ï¼šä¸šåŠ¡é€»è¾‘ä¸UIæ¸²æŸ“æ·±åº¦è€¦åˆï¼Œå›  Table ç»„ä»¶ç¼ºå¤±çš„èƒ½åŠ›ï¼Œå®šåˆ¶äº†å¤šå¤„æ•£ä¹±çš„ hack é€»è¾‘ï¼Œå¯¼è‡´å°éœ€æ±‚å¤§æ”¹åŠ¨ï¼Œå¼€å‘è€—æ—¶ä¹…ï¼Œæµ‹è¯•éš¾ä»¥è¦†ç›–å…¨</p>
</li>
<li>
<p><strong>ä¸šåŠ¡éœ€æ±‚</strong></p>
</li>
<li>
<p>ä¸“é¡¹æ²»ç†ï¼šå›¢é˜Ÿå¯¹æŠ¥è¡¨æ¨¡å—å¼€å±•æ˜“ç”¨æ€§æå‡çš„ä¸“é¡¹æ¢³ç†ï¼Œä¸“é¡¹åŒ…å«äº†è¿‘20ä¸ªéœ€æ±‚ç‚¹ï¼Œæ—¨åœ¨æå‡ç”¨æˆ·çœ‹æ•°ä½“éªŒå’Œæ•ˆç‡ï¼Œå‘æŒ¥ä¸æŒ–æ˜æŠ¥è¡¨çš„ä»·å€¼ã€‚</p>
</li>
<li>
<p>é•¿æœŸè§„åˆ’ï¼šæœªæ¥å¯èƒ½ä¼šæ”¯æŒæ›´å¤§æ•°é‡çº§æ•°æ®çš„å¯è§†åŒ–ï¼Œæ”¯æŒæ›´ä¸°å¯Œçš„ BI åˆ†æèƒ½åŠ›  </p>
</li>
</ol>
<h1 id="_3"><strong>ä¸‰ã€è°ƒç ”å¯¹æ¯”</strong></h1>
<p><strong>Canvas vs DOMï¼ŒVTableçš„ä¼˜åŠ¿</strong></p>
<ol>
<li><strong>æ¸²æŸ“å¼•æ“æŠ€æœ¯é€‰å‹</strong>  </li>
</ol>
<p><strong>ç»´åº¦</strong></p>
<p><strong>å¯¹æ¯”é¡¹</strong></p>
<p><strong>DOMæ–¹æ¡ˆçš„ç»„ä»¶åº“Table</strong></p>
<p><strong>Canvasæ–¹æ¡ˆçš„VTable</strong></p>
<p><strong>æ€§èƒ½</strong></p>
<p>å¤§æ•°æ®æ¸²æŸ“</p>
<p>è¶…è¿‡åƒè¡Œå¯èƒ½å‡ºç°æ˜æ˜¾å¡é¡¿ï¼ˆrerenderå¼€é”€ï¼‰</p>
<p>å¯æµç•…å¤„ç†ä¸‡çº§è¡Œæ•°æ®</p>
<p>å†…å­˜å ç”¨</p>
<p>æ¯ä¸ªå•å…ƒæ ¼éƒ½æ˜¯ç‹¬ç«‹DOMèŠ‚ç‚¹</p>
<p>åªç»´æŠ¤ä¸€ä¸ªç”»å¸ƒå…ƒç´ </p>
<p>é¦–æ¬¡æ¸²æŸ“é€Ÿåº¦</p>
<p>å–å†³æ•°æ®é‡çº§ï¼Œå°‘å—ï¼Œå¤šæ…¢</p>
<p>éœ€ä¸€æ¬¡æ€§è®¡ç®—ç»˜åˆ¶ç”»å¸ƒå†…çš„å†…å®¹</p>
<p>æ»šåŠ¨æ€§èƒ½</p>
<p>å¯èƒ½è§¦å‘é¢‘ç¹çš„é‡æ’é‡ç»˜</p>
<p>å¢é‡æ¸²æŸ“ï¼Œæ¸²æŸ“å¿«é€Ÿ</p>
<p>å“åº”é€Ÿåº¦</p>
<p>äº¤äº’å“åº”å¿«ï¼Œä½†å¤§æ•°æ®é‡ä¸‹å»¶è¿Ÿæ˜æ˜¾</p>
<p>ä¸€è‡´çš„å“åº”é€Ÿåº¦ï¼Œä¸å—æ•°æ®é‡å½±å“</p>
<p>åŠ¨æ€æ›´æ–°</p>
<p>å•å…ƒæ ¼çº§åˆ«æ›´æ–°é«˜æ•ˆï¼Œæ•´è¡¨æ›´æ–°è¾ƒæ…¢</p>
<p>åŒç¼“å­˜ï¼ŒåŒºåŸŸæ›´æ–°é«˜æ•ˆï¼Œé¢‘ç¹åˆ·æ–°æ€§èƒ½å¥½</p>
<p><strong>åŠŸèƒ½</strong></p>
<p>è¡¨å¤´å›ºå®š/åˆ—å†»ç»“</p>
<p>æ”¯æŒï¼Œå¤§æ•°æ®é‡ä¸‹æµè§ˆä¼šæ‰å¸§</p>
<p>æ”¯æŒï¼Œæ€§èƒ½ç¨³å®šä¸å—æ•°æ®é‡å½±å“</p>
<p>è‡ªå®šä¹‰æ ·å¼</p>
<p>å—CSSé™åˆ¶ï¼Œç‰¹æ®Šæ•ˆæœå®ç°å¤æ‚</p>
<p>é«˜åº¦è‡ªç”±ï¼Œå¯å®ç°ä»»æ„æ•ˆæœ</p>
<p>å•å…ƒæ ¼åˆå¹¶</p>
<p>æ”¯æŒï¼Œé…ç½®ç®€å•</p>
<p>æ”¯æŒï¼Œè‡ªå®šä¹‰ç¨‹åº¦æ›´é«˜</p>
<p>è¡Œ/åˆ—æ‹–æ‹½</p>
<p>æ”¯æŒï¼Œä½†éœ€é¢å¤–ç»„ä»¶</p>
<p>åŸç”Ÿæ”¯æŒï¼Œæ€§èƒ½å¥½</p>
<p>è‡ªå®šä¹‰æ¸²æŸ“</p>
<p>çµæ´»ï¼Œå¯æ¸²æŸ“ä»»æ„ React ç»„ä»¶</p>
<p>æœ‰é™ï¼Œreact18 ä»¥ä¸Šç‰ˆæœ¬æ”¯æŒè‡ªå®šä¹‰ç»„ä»¶æ¸²æŸ“ï¼Œä»¥ä¸‹ç‰ˆæœ¬ä¾èµ–æä¾›çš„ç»„ä»¶</p>
<p>æ•°æ®å¯¼å‡º</p>
<p>ä¸æ”¯æŒï¼Œéœ€è‡ªè¡Œå®ç°</p>
<p>æ”¯æŒï¼Œä¸”å¯è‡ªå®šä¹‰å¯¼å‡º</p>
<p>é€è§†è¡¨</p>
<p>ä¸æ”¯æŒï¼Œéœ€è‡ªè¡Œå®ç°</p>
<p>æ”¯æŒï¼Œæœ‰ä¸€å®šå­¦ä¹ æˆæœ¬</p>
<p>BI åˆ†æèƒ½åŠ›</p>
<p>æœç´¢ã€æ’åºä¸è¿‡æ»¤</p>
<p>åŸºç¡€åˆ†æèƒ½åŠ›å¤–ï¼Œè¿˜æœ‰èšåˆã€æ€»è®¡åŠé€è§†è¡¨åˆ†æèƒ½åŠ›</p>
<p><strong>å¼€å‘</strong></p>
<p>å­¦ä¹ æ›²çº¿</p>
<p>å¹³ç¼“ï¼Œç¬¦åˆReactå¼€å‘ä¹ æƒ¯</p>
<p>è¾ƒé™¡ï¼Œéœ€è¦å­¦ä¹ ç‰¹å®šAPI</p>
<p>æ–‡æ¡£ä¸æœç´¢èµ„æº</p>
<p>æ–‡æ¡£å®Œå–„ï¼Œç¤ºä¾‹ä¸°å¯Œã€‚</p>
<p>æ–‡æ¡£ã€æ•™ç¨‹ä»¥åŠç¤ºä¾‹å®Œå–„ã€‚æœç´¢èµ„æºè¾ƒå°‘</p>
<p>ç¤¾åŒºæ´»è·ƒåº¦</p>
<p>å†…éƒ¨ç»„ä»¶åº“ï¼Œæ´»è·ƒä¸€èˆ¬</p>
<p>æ´»è·ƒåº¦ä¸€èˆ¬ï¼ŒæŒç»­å¢é•¿ä¸­</p>
<p>TypeScriptæ”¯æŒ</p>
<p>å®Œå–„</p>
<p>å®Œå–„</p>
<p>è°ƒè¯•ä¾¿æ·æ€§</p>
<p>ä¾¿æ·</p>
<p>ä¸€èˆ¬ï¼Œä¾èµ–æ–­ç‚¹debuggerï¼Œæ¸²æŸ“å±‚é»‘ç›’</p>
<p>é›†æˆæˆæœ¬</p>
<p>ä¸ React ç”Ÿæ€æ— ç¼é›†æˆ</p>
<p>åŸºäº react å°è£… React-VTableï¼Œå¯ React å£°æ˜çš„æ–¹å¼æ¥é›†æˆå¼€å‘</p>
<ol>
<li><strong>VTable ç®€ä»‹</strong></li>
</ol>
<p>VisActor æ˜¯å­—èŠ‚å¯¹å¤–å¼€æºçš„ï¼Œé¢å‘å™äº‹çš„æ™ºèƒ½å¯è§†åŒ–è§£å†³æ–¹æ¡ˆã€‚ç”± VChart(å¯è§†åŒ–ç»„ä»¶)ï¼ŒVTable(æ•°æ®ç»„ä»¶)ï¼ŒVGrammar(è¯­æ³•ç»„ä»¶)ï¼ŒVMind(å›¾è¡¨æ™ºèƒ½ç”Ÿæˆç»„ä»¶)ï¼ŒVRender(æ¸²æŸ“ç»„ä»¶) ç­‰å¤šä¸ªç»„ä»¶ç»„æˆã€‚</p>
<p><img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/img/ACN6b8J6ZoPQDrxKePtcwgrunD3.gif' alt='' width='1000' height='auto'></p>
<p>VTable æ˜¯ VisActor å¯è§†åŒ–ä½“ç³»ä¸­çš„è¡¨æ ¼ç»„ä»¶åº“ï¼ŒåŸºäºå¯è§†åŒ–æ¸²æŸ“å¼•æ“ VRender è¿›è¡Œå°è£…ã€‚æ ¸å¿ƒèƒ½åŠ›å¦‚ä¸‹</p>
<p>æ€§èƒ½æè‡´ï¼šæ”¯æŒç™¾ä¸‡çº§æ•°æ®å¿«é€Ÿè¿ç®—ä¸æ¸²æŸ“ã€‚</p>
<p><img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/img/SbQzbEyXWodNiZxgE0UcBSq8n2L.gif' alt='' width='516' height='auto'></p>
<p>å¤šç»´åˆ†æï¼šå¤šç»´æ•°æ®è‡ªåŠ¨åˆ†æä¸å‘ˆç°</p>
<p><img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/img/X5PsboPqQoztpCxuyfVcrICKnXd.gif' alt='' width='516' height='auto'></p>
<p>è¡¨ç°åŠ›å¼ºï¼šæä¾›çµæ´»å¼ºå¤§çš„å›¾å½¢èƒ½åŠ›ï¼Œæ— ç¼èåˆVChart</p>
<p><img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/img/TELZbOgLIoeyUtxJxpJcbeSanOd.gif' alt='' width='516' height='auto'></p>
<p><strong>é€‰æ‹©VTableçš„æ ¸å¿ƒç†ç”±</strong>  </p>
<ul>
<li>
<p><strong>åœºæ™¯</strong>ï¼šä¸šåŠ¡åœºæ™¯é€‚é…ï¼Œèƒ½è§£å†³æ ¸å¿ƒç—›ç‚¹</p>
</li>
<li>
<p><strong>æ€§èƒ½</strong>ï¼šæ€§èƒ½è¡¨ç°ä¼˜å¼‚ï¼Œå†…å­˜å ç”¨ä½ï¼Œæ»šåŠ¨å’ŒåŠ¨æ€æ›´æ–°ä½“éªŒæµç•… </p>
</li>
<li>
<p><strong>åŠŸèƒ½</strong>ï¼šä¸°å¯Œçš„å¼€ç®±å³ç”¨åŸºç¡€åŠŸèƒ½ï¼Œé€è§†è¡¨åŠ BI åˆ†æèƒ½åŠ›ä¸ºåäº§å“è¿­ä»£æœ‰æ›´å¥½æƒ³è±¡ç©ºé—´</p>
</li>
<li>
<p><strong>ç”Ÿæ€</strong>ï¼šä½œä¸ºVisActorå®¶æ—ä¸€å‘˜ï¼Œä¸å…¶ä»–ç”Ÿæ€å†…äº§å“æ·±åº¦è”åŠ¨ï¼Œæ‹“å±•æ€§æ›´é«˜</p>
</li>
</ul>
<h1 id="_4"><strong>å››ã€æ¥å…¥è®¾è®¡</strong></h1>
<p><strong>æ¶æ„è®¾è®¡ä¸å¹³æ»‘è¿ç§»</strong></p>
<ol>
<li><strong>é€‚é…æ¥å…¥</strong>ï¼šåˆ‡å‰²ä¸šåŠ¡ä¸ vtable çš„ä¹‹é—´çš„è€¦åˆï¼Œæå‡å„æ¨¡å—çš„æ‹“å±•æ€§ä¸å¯ç»´æŠ¤æ€§ã€‚</li>
</ol>
<p><img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/img/PZSxbxrbhouyyjxSoZYc2SGCnje.gif' alt='' width='1000' height='auto'></p>
<p>å®ç°ä¸€ä¸ªåˆ—æ„é€ å™¨ï¼Œå®šä¹‰é€šç”¨çš„åˆ—é…ç½®é¡¹ï¼Œä¸åŒçš„ Table Column ç”Ÿæˆé€»è¾‘æŠ½ç¦»åˆ° adapter ä¸­ï¼Œé€šè¿‡ build æ–¹æ³•ç”Ÿæˆ column é…ç½®é¡¹ã€‚</p>
<pre class="codehilite"><code>// é€šç”¨åˆ—æ„é€ å™¨
export class TableColumn {
  private column: TableColumn;
  private adapter: ColumnAdapter;

  constructor(key: string, options?: { adapter?: ColumnAdapter }) {
    this.column = { key };
    this.adapter = options?.adapter;
  }

  setTitle(text: string, tooltip?: string) {
    this.column.title = {
      text,
      tooltip,
    };
  }

  // ...

  build(args?: unknow) {
    const column = this.adapter(this.column, args);
    return column;
  }

  setAdapter(adapter: TColumnAdapter) {
    this.adapter = adapter;
    return this;
  }
}

// VTable adapter
export function deliveryColumnAdapter(column: TableColumn) {
  const columnOfVTable = commonColumnAdapterOfVTable(column);
  columnOfVTable.icon = cell =&gt; {
    // ...
  };
  columnOfVTable.fieldFormat = record =&gt; {
    // ...
  };
  return columnOfVTable;
}

// ç”Ÿäº§ VTable çš„åˆ—é…ç½®
const getColumnOfVTable = (column:TableColumn, adapter: ColumnAdapter, args?: unknow) =&gt; {
  column.setAdapter(adapter);
  return column.build(args);
}
</code></pre>

<ol>
<li>
<p><strong>ä¸»é¢˜å®šåˆ¶</strong>ï¼šåŸºäº VTable ä¸»é¢˜æ‹“å±•èƒ½åŠ›ï¼Œå¤åˆ»åŸç»„ä»¶åº“ Table UI è®¾è®¡ï¼Œä½¿é¡µé¢é£æ ¼ä¿æŒä¸€è‡´ã€‚</p>
</li>
<li>
<p><strong>äº¤äº’æ¨¡å—åŒ–ï¼š</strong>å³é”®èœå•ï¼Œè¡¨æ ¼äº‹ä»¶ï¼Œè¡¨æ ¼ Tooltipï¼Œå¤é€‰æ¡†æ“ä½œï¼Œè¡¨å•åç«¯æ’åºç­‰åŠŸèƒ½æ¨¡å—åŒ–ï¼Œåœ¨ VTable å®ä¾‹åˆ›å»ºæ—¶æ³¨å†Œä½¿ç”¨ã€‚</p>
</li>
<li>
<p><strong>Icon å·§ç”¨ï¼š</strong>Icon åœ¨ VTable ä¸­çš„ä½¿ç”¨çµæ´»ï¼Œä¹Ÿæ”¯æŒè‡ªå®šä¹‰æ³¨å†Œã€é‡ç½®ã€‚å°†æŠ¥è¡¨ä¸­ä½¿ç”¨çš„ Icon æ”¶æ•›åˆ°ä¸€ä¸ªæ¨¡å—ä¸‹ç®¡ç†ï¼Œæ³¨å†Œåç›´æ¥ä½¿ç”¨ã€‚</p>
</li>
</ol>
<p><img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/img/KqJQbQZBQon5uUxqPptctN6XnCg.gif' alt='' width='1000' height='auto'></p>
<h1 id="_5"><strong>äº”ã€å®æˆ˜æ¼”ç»ƒ</strong></h1>
<ol>
<li>** VTable é«˜æ€§èƒ½æ­ç§˜** ï¼Œæ¸²æŸ“ç™¾ä¸‡è¡Œæ•°æ®</li>
</ol>
<p>VRender ä½œä¸º VTable çš„æ¸²æŸ“å¼•æ“ï¼Œæä¾›çš„æŒ‰éœ€é‡ç»˜åŠåˆå¹¶å¼‚æ­¥æ¸²æŸ“èƒ½èƒ½åŠ›ï¼Œæ”¯æŒäº†VTableçš„é«˜æ€§èƒ½æ¸²æŸ“éœ€æ±‚ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨è¡¨æ ¼çš„æ»šåŠ¨åœºæ™¯ï¼Œæ»šåŠ¨åçš„æ¸²æŸ“æ˜¯åˆ†ä¸ºæ¸²æŸ“ç¼“å­˜èƒ½è¦†ç›–çš„åŒºåŸŸå’Œæ¸²æŸ“éœ€è¦æ›´æ–°çš„åŒºåŸŸï¼ŒäºŒè€…ç›¸æ¯”é‡æ–°æ¸²æŸ“æ‰€æœ‰å†…å®¹é€Ÿåº¦æå‡æ˜¾è‘—ã€‚ç‚¹å‡»æŸ¥çœ‹å…³äº VTable æ›´å¤š<a href="https://juejin.cn/post/7304538199144562724#heading-11">åŸç†å‰–æ</a></p>
<p><img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/img/NJkSbjxQEoTcSMxfzxIcKB7SnYg.gif' alt='' width='954' height='auto'></p>
<ol>
<li><strong>åŸºäº VTable åŠ è½½ï¼Œæ›´æ–°æœºåˆ¶ï¼Œå°è£…ä¸€ä¸ª Table ç»„ä»¶</strong></li>
</ol>
<p>VTable å†…éƒ¨çš„åŠ è½½æµç¨‹ä¸­ç»å†äº†æ¨¡å—åˆå§‹åŒ–ã€æ•°æ®å¤„ç†ä»¥åŠåœºæ™¯æ¸²æŸ“ã€‚VTable æ”¯æŒå…¨é‡ã€å•é¡¹ä»¥åŠæ‰¹é‡ä¸‰ç§æ›´æ–°æ–¹å¼</p>
<ul>
<li>
<p>å…¨é‡æ›´æ–°é€‚ç”¨äºéœ€è¦å¯¹æ•´ä¸ªé…ç½®è¿›è¡Œæ›´æ”¹çš„æƒ…å†µ</p>
</li>
<li>
<p>å•é¡¹æ›´æ–°é€‚ç”¨äºä¿®æ”¹å°‘æ•°å‡ ä¸ªé…ç½®é¡¹çš„åœºæ™¯</p>
</li>
<li>
<p>æ‰¹é‡æ›´æ–°é€‚ç”¨äºæ‰¹é‡æ›´æ–°å¤šä¸ªé…ç½®é¡¹çš„æƒ…å†µï¼Œéœ€è¦è°ƒç”¨æ¥å£é‡æ–°å¸ƒå±€å’Œæ¸²æŸ“</p>
</li>
</ul>
<p>ä¸‹è¿°ä»£ç ï¼ŒåŒ…å« VTable å®ä¾‹åˆå§‹åŒ–ï¼Œæ¨¡å—æ³¨å†Œï¼Œæ›´æ–°æ¸²æŸ“ä»¥åŠå®ä¾‹å¸è½½ï¼Œæ‰€æœ‰é€»è¾‘å°è£…æˆ React ç»„ä»¶ï¼Œå¯¹å¤–æš´éœ²éƒ¨åˆ† VTable Optionsã€‚é‡‡ç”¨å…¨é‡ä¸ªæ›´æ–°æ–¹å¼ï¼Œå¯¹å¤šä¸ªé…ç½®é¡¹è¿›è¡Œæ›´æ”¹ï¼Œé¿å…å¤šæ¬¡å¸ƒå±€å’Œæ¸²æŸ“ï¼Œæé«˜é¡µé¢æ€§èƒ½ã€‚</p>
<pre class="codehilite"><code>// æ³¨å†ŒIcon
registerIcon();
const REPORT_CONTAINER_ID = 'basic_report_of_adspark';
const COMMON_STYLE_OPTION: ListTableConstructorOptions = {
  heightMode: 'standard',
  defaultRowHeight: DEFAULT_ROW_HEIGHT,
  defaultHeaderRowHeight: DEFAULT_HEADER_ROW_HEIGHT,
  autoFillWidth: true,
};
export const ReportBaseVTable = ({
  option,
  defaultSort,
}: {
  option: Omit&lt;ListTableConstructorOptions, 'container'&gt;;
  defaultSort: SortState;
}) =&gt; {
  // ...
  const tableInstance = useRef&lt;ListTable&gt;(null);

  const init = () =&gt; {
    registerCellTooltip(tableInstance.current);
    registerCellClick(tableInstance.current);
    registerCheckboxStateChangeEvent(tableInstance.current);
    registerCellDropdownMenuClick(tableInstance.current);
    registerTableSort(tableInstance.current);
    // ...
  };

  useEffect(() =&gt; {
    if (!option?.columns?.length) {
      return;
    }
    if (!tableInstance.current) {
      tableInstance.current = new ListTable({
        container: document.getElementById(REPORT_CONTAINER_ID),
      });
      init();
    }
    // æ‰¹é‡æ›´æ–°
    tableInstance.current?.updateOption({
      widthMode: 'autoWidth',
      heightMode: 'autoHeight',
      ...COMMON_STYLE_OPTION,
      ...option,
      theme: CustomTheme,
    });
    // å•ç‹¬æ›´æ–° sort
    tableInstance.current?.updateSortState(defaultSort, false);
  }, [defaultSort, option]);


  useUnmount(() =&gt; {
    tableInstance.current?.release();
    tableInstance.current = null;
  });

  return (
    &lt;div
      style={{
        height: (tableInstance.current?.records?.length ?? 0) * DEFAULT_ROW_HEIGHT + DEFAULT_HEADER_ROW_HEIGHT,
        width: '100%',
      }}
      id={REPORT_CONTAINER_ID}
    &gt;&lt;/div&gt;
  );
};
</code></pre>

<ol>
<li><strong>å®šåˆ¶ä¸»é¢˜</strong></li>
</ol>
<p>VTable æ”¯æŒè‡ªå®šä¹‰ä¸»é¢˜ï¼Œç»“åˆé¡¹ç›® UI é£æ ¼ï¼ŒåŸºäºé»˜è®¤çš„ä¸»é¢˜æ‰©å±•å‡ºäº†ä¸€å¥—å®šåˆ¶ä¸»é¢˜ã€‚</p>
<pre class="codehilite"><code>/**
* å®šä¹‰ä¸»é¢˜
*/
export const CustomTheme: ITableThemeDefine = VTable.themes.DEFAULT.extends({
  // è¡¨å¤´æ ·å¼
  headerStyle: {
    // ...
    hover: {
      cellBgColor: '#f0f0f0',
    },
  },
  bodyStyle: { fontSize: 12, color: '#333', borderLineWidth: [1, 0, 1, 0], bgColor: '#fff' },
  frameStyle: { borderLineWidth: null, borderColor: '#fff' },
  // é€‰ä¸­å¤ªæ ·å¼
  selectionStyle: {
    // ...
  },
  // å†»ç»“åˆ—æ ·å¼
  frozenColumnLine: {
    border: {
     // ...
    },
    shadow: {
    },
  },
  // æ»šåŠ¨æ¡æ ·å¼
  scrollStyle: {
    // ...
  },
  // tooltip æ ·å¼
  tooltipStyle: {
  //...
  },
});

// æ›¿æ¢ä¸»é¢˜
const option = {
 // ...
 theme: CustomTheme
 // ...
}
</code></pre>

<ol>
<li><strong>è‡ªå®šä¹‰Tooltip</strong></li>
</ol>
<p>ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œéƒ¨åˆ†å•å…ƒæ ¼çš„ hover éœ€è¦  tooltip çš„äº¤äº’ï¼Œå®ç°æ€è·¯ç›‘å¬å•å…ƒæ ¼ mouseenter äº‹ä»¶ï¼Œè·å–å½“å‰å•å…ƒæ ¼å†…å®¹å’Œä½ç½®ä¿¡æ¯ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦ tooltip, å¦‚æœéœ€è¦åˆ™ä½¿ç”¨ showTooltip API æ¥å®ç° tooltip æ•ˆæœï¼ŒAPI æ”¯æŒ tooltip å†…å®¹ã€æ ·å¼åŠåŠ¨ç”»çš„å¤šä¸ªç»´åº¦çš„é…ç½®ã€‚</p>
<pre class="codehilite"><code>/**
* è‡ªå®šä¹‰å•å…ƒæ ¼çš„Tooltip
*/
export function registerCellTooltip(tableInstance: ListTable) {
  tableInstance.on('mouseenter_cell', args =&gt; {
    const { col, row } = args;
    // è·å–å•å…ƒæ ¼å†…å®¹
    const { dataValue, field } = tableInstance.getCellInfo(col, row);
    // ... 
    // è·å–å•å…ƒæ ¼ä½ç½®ä¿¡æ¯
    const rect = tableInstance.getVisibleCellRangeRelativeRect({ col, row });
    // å±•ç¤º tooltip
    tableInstance.showTooltip(col, row, {
      content: getTooltipContent(dataValue, field),
      referencePosition: { rect, placement: VTable.TYPES.Placement.top },
      className: 'defineTooltip',
      disappearDelay: 60,
      style: {
        bgColor: 'black',
        color: 'white',
        arrowMark: true,
      },
    });
  });
}
</code></pre>

<ol>
<li><strong>å³é”®èœå•</strong></li>
</ol>
<p>æµè§ˆæŠ¥è¡¨æ—¶ï¼Œå³é”®èœå•èƒ½å¤Ÿæå‡ç”¨æˆ·æ“ä½œæŠ¥è¡¨çš„æ•ˆç‡ã€‚VTable æ”¯æŒè‡ªå®šä¹‰å³é”®èœå•ï¼Œå®ç°åˆ†ä¸ºä¸¤æ­¥</p>
<ul>
<li>
<p>å®šä¹‰ menuï¼Œé…ç½®èœå•é¡¹çš„ key ä¸ text</p>
</li>
<li>
<p>æ³¨å†Œèœå•äº‹ä»¶ dropdown_menu_clickï¼Œ ç»“åˆé€‰æ‹©èœå•é¡¹å®ç°ä¸šåŠ¡åŠŸèƒ½</p>
</li>
</ul>
<pre class="codehilite"><code>export enum EContextMenuKey {
  // ...
  CopyId = 'copyId',
}
export const ContextToMenuMap = {
 // ...
  [EContextMenuKey.CopyId]: {
    key: EContextMenuKey.CopyId,
    text: 'å¤åˆ¶ ID',
  },
};

const option = {
// ...
 /**
  * èœå•é…ç½®
 */
 menu: {
        contextMenuItems: (field: string, row: number, col: number, table?: BaseTableAPI) =&gt;  [
         {
            menuKey: EContextMenuKey.CopyId,
            text: ContextToMenuMap[EContextMenuKey.CopyId].text,
         }
        ]

//...
}

/**
* èœå•äº‹ä»¶æ³¨å†Œ
*/
export function registerCellDropdownMenuClick(tableInstance: ListTable) {
  tableInstance.on('dropdown_menu_click', (args: DropDownMenuEventArgs) =&gt; {
    // ...
    let copy = tableInstance.getCellRawValue(args.col, args.row);
    if (args.menuKey === EContextMenuKey.CopyId) {
      copy = copy.split(REPORT_DATA_ID_SEPARATOR)?.[0];
    }
    navigator?.clipboard?.writeText?.(copy);
    // ... 
  });
}
</code></pre>

<ol>
<li><strong>è‡ªå®šä¹‰icon</strong></li>
</ol>
<p>VTable ä¸­ Icon åº”ç”¨åœºæ™¯å¹¿æ³›ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ icon å’Œ headerIcon æ¥é…ç½®è¡¨å¤´åŠ body æ˜¾ç¤ºçš„å•å…ƒæ ¼å›¾æ ‡ï¼Œicon é…ç½®é¡¹ä¸°å¯Œï¼Œæ¶‰åŠ Icon å†…å®¹ï¼Œæ ·å¼ä»¥åŠ tooltip ç­‰ï¼Œæ­¤å¤–ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ icon æ³¨å†Œåˆ°è¡¨æ ¼ä¸­ä½¿ç”¨, ä½¿ç”¨æ—¶åªéœ€é…ç½® icon name å³å¯ã€‚</p>
<pre class="codehilite"><code>export enum TableIcon {
  // ...
  GoToAnchor = 'goToAnchor',
}
/**
* icon å®šä¹‰
*/
export const ICON_MAP: Record&lt;TableIcon, ColumnIconOption&gt; = {
  [TableIcon.GoToAnchor]: {
    type: 'svg',
    name: TableIcon.GoToAnchor,
    svg:'https://xxxx',
    width: ICON_WIDHT,
    height: ICON_HEIGHT,
    // æ‰€å¤„ä½ç½®
    positionType: VTable.TYPES.IconPosition.left,
    // tootip é…ç½®
    tooltip: {
      style: {
        arrowMark: true,
      },
      title: '',
      placement: VTable.TYPES.Placement.right,
    },
    // hover æ ·å¼
    cursor: 'pointer',
  },
};
/**
* æ³¨å†Œ Icon
*/
export function registerIcon() {
  Object.values(ICON_MAP).forEach(icon =&gt; {
    VTable.register.icon(icon.name, icon);
  });
}
// ä½¿ç”¨ icon 
const tableInstance = new VTable.PivotTable({
  columns: [
    {
      field: '',
      // ..
      headerIcon: TableIcon.GoToAnchor,
      icon: TableIcon.GoToAnchor
    }
  ]
});
/**
* icon ç‚¹å‡»äº‹ä»¶
*/
export function registerIconClick(tableInstance: ListTable) {
  tableInstance.on('click_cell', args =&gt; {
    // è·å–Icon
    const { targetIcon, originData } = args;
    // ç‚¹å‡» Icon çš„åŠ¨ä½œ
    if (targetIcon?.name === TableIcon.GoToAnchor) {
      // ....
  });
}
</code></pre>

<h1 id="_6"><strong>å…­ã€æ•ˆæœéªŒè¯</strong></h1>
<p><strong>ä»æŠ€æœ¯æŒ‡æ ‡åˆ°ä¸šåŠ¡å½±å“çš„å…¨æ™¯å‘ˆç°</strong>  </p>
<ol>
<li><strong>æµè§ˆæµç•…</strong></li>
</ol>
<p>å¡é¡¿é—®é¢˜ä¸å¤å­˜åœ¨ï¼Œå¯¹æ¯”æ•ˆæœåœ¨ä½é…ç”µè„‘æ„ŸçŸ¥æ›´ä¸ºæ˜æ˜¾ã€‚ä¸‹å›¾ä¸­æ–°æŠ¥è¡¨æ¯é¡µæ¸²æŸ“50æ¡æ•°æ®ï¼ŒåŸæŠ¥è¡¨æ¸²æŸ“30æ¡æ•°æ®çš„æ¸²æŸ“å¸§ç‡å¯¹æ¯”ã€‚</p>
<p><img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/img/S79QbLmKMooE6qxx4pwcG3wlnUf.gif' alt='' width='974' height='auto'></p>
<p><img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/img/KwgAbX6O4or8ioxJOTTcXRh1nfd.gif' alt='' width='1000' height='auto'></p>
<ol>
<li><strong>äº¤äº’ä¸°å¯Œ</strong></li>
</ol>
<p><img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/img/XCNHbtQm0oTn8mxhTcrcDJPDn1g.gif' alt='' width='666' height='auto'></p>
<p><img src='https://cdn.jsdelivr.net/gh/xuanhun/articles/visactor/img/TSapbqDwXo1X7mxqM8EceYGfn9e.gif' alt='' width='666' height='auto'></p>
<ol>
<li><strong>æ€§èƒ½æŒ‡æ ‡é‡åŒ–å¯¹æ¯”</strong></li>
</ol>
<p><strong>åœºæ™¯</strong></p>
<p><strong>åŸæ–¹æ¡ˆ</strong></p>
<p><strong>VTableæ–¹æ¡ˆ</strong></p>
<p><strong>æå‡</strong></p>
<p>äº¤äº’æµè§ˆ</p>
<p>å¹³å‡48å¸§å·¦å³ï¼Œå¸§ç‡ä¸ç¨³å®š</p>
<p>å¹³å‡58å¸§</p>
<p>+20%ï¼Œä¸”ç¨³å®šæ€§æå‡</p>
<p>INP</p>
<p>740ms</p>
<p>334ms</p>
<p>+54.8%</p>
<p>ä½“æ„Ÿè€—æ—¶</p>
<p>5s</p>
<p>2.6s</p>
<p>+48%(ç»“åˆç»“åˆå…¶ä»–ç­–ç•¥å…±åŒä¼˜åŒ–æ•ˆæœ)</p>
<ol>
<li>
<p><strong>ä¸šåŠ¡ä»·å€¼</strong></p>
</li>
<li>
<p><strong>é«˜é¢‘éœ€æ±‚æ ‡å‡†åŒ–</strong>ï¼šå³é”®èœå•ã€å•å‡»äº‹ä»¶ç­‰äº¤äº’åŠŸèƒ½é…ç½®åŒ–ã€æ¨¡å—åŒ–çš„è®¾è®¡å¤ç”¨åº¦é«˜ï¼Œéœ€æ±‚è¿­ä»£æ•ˆç‡æå‡</p>
</li>
<li>
<p><strong>æŠ€æœ¯å€ºåŠ¡æ¸…ç†</strong>ï¼šæ—§ç»„ä»¶åº“å¼ºè€¦åˆä»£ç ç§»é™¤ï¼Œå½»åº•è§£å†³å‡çº§å›°å¢ƒ </p>
</li>
<li>
<p><strong>ç»éªŒæ²‰æ·€ä¸æœªæ¥è§„åˆ’</strong></p>
</li>
<li>
<p><strong>æ ¸å¿ƒç»éªŒ</strong>ï¼š  </p>
</li>
<li>
<p>æ¸²æŸ“å¼•æ“é€‰å‹éœ€åŒ¹é…ä¸šåŠ¡åœºæ™¯ï¼Œç»“åˆé¡¹ç›®å†å²è¿­ä»£ä¸æŠ€æœ¯æ ˆ</p>
</li>
<li>
<p>é€‚é…å±‚è®¾è®¡æ˜¯å¹³æ»‘è¿ç§»ä¸æŠ€æœ¯å¯æ§æ€§çš„å…³é”®</p>
</li>
<li>
<p><strong>æœªæ¥æ¼”è¿›</strong>ï¼š  </p>
</li>
<li>
<p><strong>å¯è§†åŒ–èåˆ</strong>ï¼šVTable + VChartå®ç°å›¾è¡¨å†…åµŒè¡¨æ ¼ </p>
</li>
<li>
<p><strong>æ™ºèƒ½åŒ–æ¢ç´¢</strong>ï¼šåŸºäºè¡¨æ ¼æ•°æ®çš„äºŒæ¬¡åˆ†æä¸AIè¾…åŠ©åˆ†æ</p>
</li>
</ol>
<h1 id="_7">æ¬¢è¿äº¤æµ</h1>
<p>æœ€åï¼Œæˆ‘ä»¬è¯šæŒšçš„æ¬¢è¿æ‰€æœ‰å¯¹æ•°æ®å¯è§†åŒ–æ„Ÿå…´è¶£çš„æœ‹å‹å‚ä¸è¿›æ¥ï¼Œå‚ä¸ VisActor çš„å¼€æºå»ºè®¾ï¼š</p>
<p><strong>VChart</strong>ï¼š<a href="https://www.visactor.io/vchart">VChart å®˜ç½‘</a>ã€<a href="https://github.com/VisActor/VChart">VChart Githubï¼ˆæ¬¢è¿ Starï¼‰</a></p>
<p><strong>VTable</strong>ï¼š<a href="https://www.visactor.io/vtable">VTable å®˜ç½‘</a>ã€<a href="https://github.com/VisActor/VTable">VTable Githubï¼ˆæ¬¢è¿ Starï¼‰</a></p>
<p><strong>VMind</strong>ï¼š<a href="https://www.visactor.io/vmind">VMind å®˜ç½‘</a>ã€<a href="https://github.com/VisActor/VMind">VMind Githubï¼ˆæ¬¢è¿ Starï¼‰</a></p>
<p>å®˜æ–¹ç½‘ç«™ï¼š<a href="http://www.visactor.io/">www.visactor.io/</a> æˆ– www.viactor.com</p>
<p>Discordï¼š<a href="http://discord.gg/3wPyxVyH6m">discord.gg/3wPyxVyH6m</a></p>
<p>é£ä¹¦ç¾¤ï¼ˆå¤–ç½‘ï¼‰ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fp3-juejin.byteimg.com%2Ftos-cn-i-k3u1fbpfcp%2F40dcf4e6722d4925804361a2269991d8~tplv-k3u1fbpfcp-jj-mark%3A0%3A0%3A0%3A0%3Aq75.image%23%3Fw%3D264%26h%3D277%26s%3D35808%26e%3Dpng%26b%3Dfdfdfd">æ‰“å¼€é“¾æ¥æ‰«ç </a></p>
<p>å¾®ä¿¡å…¬ä¼—å·ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fp3-juejin.byteimg.com%2Ftos-cn-i-k3u1fbpfcp%2Ff28519302ee94940a8159fc52d375aaa~tplv-k3u1fbpfcp-jj-mark%3A0%3A0%3A0%3A0%3Aq75.image%23%3Fw%3D258%26h%3D258%26s%3D8552%26e%3Dwebp%26b%3Dfefefe">æ‰“å¼€é“¾æ¥æ‰«ç </a></p>
<p>githubï¼š<a href="https://github.com/VisActor/">github.com/VisActor</a></p>
</body>
</html>